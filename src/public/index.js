var m2=Object.create;var{defineProperty:Ly,getPrototypeOf:K2,getOwnPropertyNames:c2}=Object;var G2=Object.prototype.hasOwnProperty;var Yy=(k,Xv,Hv)=>{Hv=k!=null?m2(K2(k)):{};const o=Xv||!k||!k.__esModule?Ly(Hv,"default",{value:k,enumerable:!0}):Hv;for(let Tv of c2(k))if(!G2.call(o,Tv))Ly(o,Tv,{get:()=>k[Tv],enumerable:!0});return o};var Zy=(k,Xv)=>()=>(Xv||k((Xv={exports:{}}).exports,Xv),Xv.exports);var Jy=Zy((hy,K0)=>{(function(k,Xv){if(typeof define==="function"&&define.amd)define([],Xv);else if(typeof K0==="object"&&hy)K0.exports=Xv();else k.htmx=k.htmx||Xv()})(typeof self!=="undefined"?self:hy,function(){return function(){var k={onLoad:O,process:i0,on:T,off:V,trigger:n,ajax:Wy,find:q,findAll:Q,closest:f,values:function(v,R){var _=h0(v,R||"post");return _.values},remove:E,addClass:x,removeClass:h,toggleClass:K,takeClass:G,defineExtension:x2,removeExtension:L2,logAll:X,logNone:L,logger:null,config:{historyEnabled:!0,historyCacheSize:10,refreshOnHistoryMiss:!1,defaultSwapStyle:"innerHTML",defaultSwapDelay:0,defaultSettleDelay:20,includeIndicatorStyles:!0,indicatorClass:"htmx-indicator",requestClass:"htmx-request",addedClass:"htmx-added",settlingClass:"htmx-settling",swappingClass:"htmx-swapping",allowEval:!0,inlineScriptNonce:"",attributesToSettle:["class","style","width","height"],withCredentials:!1,timeout:0,wsReconnectDelay:"full-jitter",wsBinaryType:"blob",disableSelector:"[hx-disable], [data-hx-disable]",useTemplateFragments:!1,scrollBehavior:"smooth",defaultFocusScroll:!1,getCacheBusterParam:!1,globalViewTransitions:!1,methodsThatUseUrlParams:["get"]},parseInterval:Tv,_:M,createEventSource:function(v){return new EventSource(v,{withCredentials:!0})},createWebSocket:function(v){var R=new WebSocket(v,[]);return R.binaryType=k.config.wsBinaryType,R},version:"1.9.4"},Xv={addTriggerHandler:a0,bodyContains:g,canAccessLocalStorage:N,findThisElement:b,filterValues:e0,hasAttribute:Ov,getAttributeValue:Dv,getClosestAttributeValue:Fv,getClosestMatch:rv,getExpressionVars:gy,getHeaders:r0,getInputValues:h0,getInternalData:i,getSwapSpecification:vy,getTriggerSpecs:f0,getTarget:W,makeFragment:ev,mergeObjects:$,makeSettleInfo:V0,oobSwap:t,querySelectorExt:z,selectAndSwap:wv,settleImmediately:N0,shouldCancel:S0,triggerEvent:n,triggerErrorEvent:Bv,withExtensions:T0},Hv=["get","post","put","delete","patch"],o=Hv.map(function(v){return"[hx-"+v+"], [data-hx-"+v+"]"}).join(", ");function Tv(v){if(v==void 0)return;if(v.slice(-2)=="ms")return parseFloat(v.slice(0,-2))||void 0;if(v.slice(-1)=="s")return parseFloat(v.slice(0,-1))*1000||void 0;if(v.slice(-1)=="m")return parseFloat(v.slice(0,-1))*1000*60||void 0;return parseFloat(v)||void 0}function Rv(v,R){return v.getAttribute&&v.getAttribute(R)}function Ov(v,R){return v.hasAttribute&&(v.hasAttribute(R)||v.hasAttribute("data-"+R))}function Dv(v,R){return Rv(v,R)||Rv(v,"data-"+R)}function Yv(v){return v.parentElement}function a(){return document}function rv(v,R){while(v&&!R(v))v=Yv(v);return v?v:null}function j0(v,R,_){var U=Dv(R,_),P=Dv(R,"hx-disinherit");if(v!==R&&P&&(P==="*"||P.split(" ").indexOf(_)>=0))return"unset";else return U}function Fv(v,R){var _=null;if(rv(v,function(U){return _=j0(v,U,R)}),_!=="unset")return _}function Wv(v,R){var _=v.matches||v.matchesSelector||v.msMatchesSelector||v.mozMatchesSelector||v.webkitMatchesSelector||v.oMatchesSelector;return _&&_.call(v,R)}function Q0(v){var R=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,_=R.exec(v);if(_)return _[1].toLowerCase();else return""}function ov(v,R){var _=new DOMParser,U=_.parseFromString(v,"text/html"),P=U.body;while(R>0)R--,P=P.firstChild;if(P==null)P=a().createDocumentFragment();return P}function c0(v){return v.match(/<body/)}function ev(v){var R=!c0(v);if(k.config.useTemplateFragments&&R){var _=ov("<body><template>"+v+"</template></body>",0);return _.querySelector("template").content}else{var U=Q0(v);switch(U){case"thead":case"tbody":case"tfoot":case"colgroup":case"caption":return ov("<table>"+v+"</table>",1);case"col":return ov("<table><colgroup>"+v+"</colgroup></table>",2);case"tr":return ov("<table><tbody>"+v+"</tbody></table>",2);case"td":case"th":return ov("<table><tbody><tr>"+v+"</tr></tbody></table>",3);case"script":return ov("<div>"+v+"</div>",1);default:return ov(v,0)}}}function Zv(v){if(v)v()}function F0(v,R){return Object.prototype.toString.call(v)==="[object "+R+"]"}function bv(v){return F0(v,"Function")}function G0(v){return F0(v,"Object")}function i(v){var R="htmx-internal-data",_=v[R];if(!_)_=v[R]={};return _}function I0(v){var R=[];if(v)for(var _=0;_<v.length;_++)R.push(v[_]);return R}function e(v,R){if(v)for(var _=0;_<v.length;_++)R(v[_])}function O0(v){var R=v.getBoundingClientRect(),_=R.top,U=R.bottom;return _<window.innerHeight&&U>=0}function g(v){if(v.getRootNode&&v.getRootNode()instanceof window.ShadowRoot)return a().body.contains(v.getRootNode().host);else return a().body.contains(v)}function D(v){return v.trim().split(/\s+/)}function $(v,R){for(var _ in R)if(R.hasOwnProperty(_))v[_]=R[_];return v}function j(v){try{return JSON.parse(v)}catch(R){return v0(R),null}}function N(){var v="htmx:localStorageTest";try{return localStorage.setItem(v,v),localStorage.removeItem(v),!0}catch(R){return!1}}function Y(v){try{var R=new URL(v);if(R)v=R.pathname+R.search;if(!v.match("^/$"))v=v.replace(/\/+$/,"");return v}catch(_){return v}}function M(v){return yy(a().body,function(){return(0, eval)(v)})}function O(v){var R=k.on("htmx:load",function(_){v(_.detail.elt)});return R}function X(){k.logger=function(v,R,_){if(console)console.log(R,v,_)}}function L(){k.logger=null}function q(v,R){if(R)return v.querySelector(R);else return q(a(),v)}function Q(v,R){if(R)return v.querySelectorAll(R);else return Q(a(),v)}function E(v,R){if(v=F(v),R)setTimeout(function(){E(v),v=null},R);else v.parentElement.removeChild(v)}function x(v,R,_){if(v=F(v),_)setTimeout(function(){x(v,R),v=null},_);else v.classList&&v.classList.add(R)}function h(v,R,_){if(v=F(v),_)setTimeout(function(){h(v,R),v=null},_);else if(v.classList){if(v.classList.remove(R),v.classList.length===0)v.removeAttribute("class")}}function K(v,R){v=F(v),v.classList.toggle(R)}function G(v,R){v=F(v),e(v.parentElement.children,function(_){h(_,R)}),x(v,R)}function f(v,R){if(v=F(v),v.closest)return v.closest(R);else{do if(v==null||Wv(v,R))return v;while(v=v&&Yv(v));return null}}function u(v){var R=v.trim();if(R.startsWith("<")&&R.endsWith("/>"))return R.substring(1,R.length-2);else return R}function B(v,R){if(R.indexOf("closest ")===0)return[f(v,u(R.substr(8)))];else if(R.indexOf("find ")===0)return[q(v,u(R.substr(5)))];else if(R.indexOf("next ")===0)return[H(v,u(R.substr(5)))];else if(R.indexOf("previous ")===0)return[y(v,u(R.substr(9)))];else if(R==="document")return[document];else if(R==="window")return[window];else return a().querySelectorAll(u(R))}var H=function(v,R){var _=a().querySelectorAll(R);for(var U=0;U<_.length;U++){var P=_[U];if(P.compareDocumentPosition(v)===Node.DOCUMENT_POSITION_PRECEDING)return P}},y=function(v,R){var _=a().querySelectorAll(R);for(var U=_.length-1;U>=0;U--){var P=_[U];if(P.compareDocumentPosition(v)===Node.DOCUMENT_POSITION_FOLLOWING)return P}};function z(v,R){if(R)return B(v,R)[0];else return B(a().body,v)[0]}function F(v){if(F0(v,"String"))return q(v);else return v}function A(v,R,_){if(bv(R))return{target:a().body,event:v,listener:R};else return{target:F(v),event:R,listener:_}}function T(v,R,_){_y(function(){var P=A(v,R,_);P.target.addEventListener(P.event,P.listener)});var U=bv(R);return U?R:_}function V(v,R,_){return _y(function(){var U=A(v,R,_);U.target.removeEventListener(U.event,U.listener)}),bv(R)?R:_}var I=a().createElement("output");function p(v,R){var _=Fv(v,R);if(_)if(_==="this")return[b(v,R)];else{var U=B(v,_);if(U.length===0)return v0('The selector "'+_+'" on '+R+" returned no matches!"),[I];else return U}}function b(v,R){return rv(v,function(_){return Dv(_,R)!=null})}function W(v){var R=Fv(v,"hx-target");if(R)if(R==="this")return b(v,"hx-target");else return z(v,R);else{var _=i(v);if(_.boosted)return a().body;else return v}}function C(v){var R=k.config.attributesToSettle;for(var _=0;_<R.length;_++)if(v===R[_])return!0;return!1}function J(v,R){e(v.attributes,function(_){if(!R.hasAttribute(_.name)&&C(_.name))v.removeAttribute(_.name)}),e(R.attributes,function(_){if(C(_.name))v.setAttribute(_.name,_.value)})}function S(v,R){var _=J0(R);for(var U=0;U<_.length;U++){var P=_[U];try{if(P.isInlineSwap(v))return!0}catch(d){v0(d)}}return v==="outerHTML"}function t(v,R,_){var U="#"+Rv(R,"id"),P="outerHTML";if(v==="true");else if(v.indexOf(":")>0)P=v.substr(0,v.indexOf(":")),U=v.substr(v.indexOf(":")+1,v.length);else P=v;var d=a().querySelectorAll(U);if(d)e(d,function(w){var Z,m=R.cloneNode(!0);if(Z=a().createDocumentFragment(),Z.appendChild(m),!S(P,w))Z=m;var l={shouldSwap:!0,target:w,fragment:Z};if(!n(w,"htmx:oobBeforeSwap",l))return;if(w=l.target,l.shouldSwap)Iv(P,w,w,Z,_);e(_.elts,function(s){n(s,"htmx:oobAfterSwap",l)})}),R.parentNode.removeChild(R);else R.parentNode.removeChild(R),Bv(a().body,"htmx:oobErrorNoTarget",{content:R});return v}function c(v,R,_){var U=Fv(v,"hx-select-oob");if(U){var P=U.split(",");for(let l=0;l<P.length;l++){var d=P[l].split(":",2),w=d[0].trim();if(w.indexOf("#")===0)w=w.substring(1);var Z=d[1]||"true",m=R.querySelector("#"+w);if(m)t(Z,m,_)}}e(Q(R,"[hx-swap-oob], [data-hx-swap-oob]"),function(l){var s=Dv(l,"hx-swap-oob");if(s!=null)t(s,l,_)})}function _v(v){e(Q(v,"[hx-preserve], [data-hx-preserve]"),function(R){var _=Dv(R,"id"),U=a().getElementById(_);if(U!=null)R.parentNode.replaceChild(U,R)})}function yv(v,R,_){e(R.querySelectorAll("[id]"),function(U){var P=Rv(U,"id");if(P&&P.length>0){var d=P.replace("'","\\'"),w=U.tagName.replace(":","\\:"),Z=v.querySelector(w+"[id='"+d+"']");if(Z&&Z!==v){var m=U.cloneNode();J(U,Z),_.tasks.push(function(){J(U,m)})}}})}function pv(v){return function(){h(v,k.config.addedClass),i0(v),ty(v),xv(v),n(v,"htmx:load")}}function xv(v){var R="[autofocus]",_=Wv(v,R)?v:v.querySelector(R);if(_!=null)_.focus()}function gv(v,R,_,U){yv(v,_,U);while(_.childNodes.length>0){var P=_.firstChild;if(x(P,k.config.addedClass),v.insertBefore(P,R),P.nodeType!==Node.TEXT_NODE&&P.nodeType!==Node.COMMENT_NODE)U.tasks.push(pv(P))}}function Vv(v,R){var _=0;while(_<v.length)R=(R<<5)-R+v.charCodeAt(_++)|0;return R}function dv(v){var R=0;if(v.attributes)for(var _=0;_<v.attributes.length;_++){var U=v.attributes[_];if(U.value)R=Vv(U.name,R),R=Vv(U.value,R)}return R}function $v(v){var R=i(v);if(R.onHandlers){for(let _=0;_<R.onHandlers.length;_++){const U=R.onHandlers[_];v.removeEventListener(U.event,U.listener)}delete R.onHandlers}}function Mv(v){var R=i(v);if(R.timeout)clearTimeout(R.timeout);if(R.webSocket)R.webSocket.close();if(R.sseEventSource)R.sseEventSource.close();if(R.listenerInfos)e(R.listenerInfos,function(_){if(_.on)_.on.removeEventListener(_.trigger,_.listener)});if(R.initHash)R.initHash=null;$v(v)}function Nv(v){if(n(v,"htmx:beforeCleanupElement"),Mv(v),v.children)e(v.children,function(R){Nv(R)})}function g0(v,R,_){if(v.tagName==="BODY")return Uv(v,R,_);else{var U,P=v.previousSibling;if(gv(Yv(v),v,R,_),P==null)U=Yv(v).firstChild;else U=P.nextSibling;i(v).replacedWith=U,_.elts=_.elts.filter(function(d){return d!=v});while(U&&U!==v){if(U.nodeType===Node.ELEMENT_NODE)_.elts.push(U);U=U.nextElementSibling}Nv(v),Yv(v).removeChild(v)}}function U0(v,R,_){return gv(v,v.firstChild,R,_)}function b0(v,R,_){return gv(Yv(v),v,R,_)}function A0(v,R,_){return gv(v,null,R,_)}function x0(v,R,_){return gv(Yv(v),v.nextSibling,R,_)}function hv(v,R,_){return Nv(v),Yv(v).removeChild(v)}function Uv(v,R,_){var U=v.firstChild;if(gv(v,U,R,_),U){while(U.nextSibling)Nv(U.nextSibling),v.removeChild(U.nextSibling);Nv(U),v.removeChild(U)}}function fv(v,R,_){var U=_||Fv(v,"hx-select");if(U){var P=a().createDocumentFragment();e(R.querySelectorAll(U),function(d){P.appendChild(d)}),R=P}return R}function Iv(v,R,_,U,P){switch(v){case"none":return;case"outerHTML":g0(_,U,P);return;case"afterbegin":U0(_,U,P);return;case"beforebegin":b0(_,U,P);return;case"beforeend":A0(_,U,P);return;case"afterend":x0(_,U,P);return;case"delete":hv(_,U,P);return;default:var d=J0(R);for(var w=0;w<d.length;w++){var Z=d[w];try{var m=Z.handleSwap(v,_,U,P);if(m){if(typeof m.length!=="undefined")for(var l=0;l<m.length;l++){var s=m[l];if(s.nodeType!==Node.TEXT_NODE&&s.nodeType!==Node.COMMENT_NODE)P.tasks.push(pv(s))}return}}catch(vv){v0(vv)}}if(v==="innerHTML")Uv(_,U,P);else Iv(k.config.defaultSwapStyle,R,_,U,P)}}function r(v){if(v.indexOf("<title")>-1){var R=v.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,""),_=R.match(/<title(\s[^>]*>|>)([\s\S]*?)<\/title>/im);if(_)return _[2]}}function wv(v,R,_,U,P,d){P.title=r(U);var w=ev(U);if(w)return c(_,w,P),w=fv(_,w,d),_v(w),Iv(v,_,R,w,P)}function Sv(v,R,_){var U=v.getResponseHeader(R);if(U.indexOf("{")===0){var P=j(U);for(var d in P)if(P.hasOwnProperty(d)){var w=P[d];if(!G0(w))w={value:w};n(_,d,w)}}else{var Z=U.split(",");for(var m=0;m<Z.length;m++)n(_,Z[m].trim(),[])}}var Ay=/\s/,Jv=/[\s,]/,lv=/[_$a-zA-Z]/,zv=/[_$a-zA-Z0-9]/,D0=['"',"'","/"],R0=/[^\s]/;function av(v){var R=[],_=0;while(_<v.length){if(lv.exec(v.charAt(_))){var U=_;while(zv.exec(v.charAt(_+1)))_++;R.push(v.substr(U,_-U+1))}else if(D0.indexOf(v.charAt(_))!==-1){var P=v.charAt(_),U=_;_++;while(_<v.length&&v.charAt(_)!==P){if(v.charAt(_)==="\\")_++;_++}R.push(v.substr(U,_-U+1))}else{var d=v.charAt(_);R.push(d)}_++}return R}function H0(v,R,_){return lv.exec(v.charAt(0))&&v!=="true"&&v!=="false"&&v!=="this"&&v!==_&&R!=="."}function p0(v,R,_){if(R[0]==="["){R.shift();var U=1,P=" return (function("+_+"){ return (",d=null;while(R.length>0){var w=R[0];if(w==="]"){if(U--,U===0){if(d===null)P=P+"true";R.shift(),P+=")})";try{var Z=yy(v,function(){return Function(P)()},function(){return!0});return Z.source=P,Z}catch(m){return Bv(a().body,"htmx:syntax:error",{error:m,source:P}),null}}}else if(w==="[")U++;if(H0(w,d,_))P+="(("+_+"."+w+") ? ("+_+"."+w+") : (window."+w+"))";else P=P+w;d=R.shift()}}}function Lv(v,R){var _="";while(v.length>0&&!v[0].match(R))_+=v.shift();return _}var Dy="input, textarea, select";function f0(v){var R=Dv(v,"hx-trigger"),_=[];if(R){var U=av(R);do{Lv(U,R0);var P=U.length,d=Lv(U,/[,\[\s]/);if(d!=="")if(d==="every"){var w={trigger:"every"};Lv(U,R0),w.pollInterval=Tv(Lv(U,/[,\[\s]/)),Lv(U,R0);var Z=p0(v,U,"event");if(Z)w.eventFilter=Z;_.push(w)}else if(d.indexOf("sse:")===0)_.push({trigger:"sse",sseEvent:d.substr(4)});else{var m={trigger:d},Z=p0(v,U,"event");if(Z)m.eventFilter=Z;while(U.length>0&&U[0]!==","){Lv(U,R0);var l=U.shift();if(l==="changed")m.changed=!0;else if(l==="once")m.once=!0;else if(l==="consume")m.consume=!0;else if(l==="delay"&&U[0]===":")U.shift(),m.delay=Tv(Lv(U,Jv));else if(l==="from"&&U[0]===":"){U.shift();var s=Lv(U,Jv);if(s==="closest"||s==="find"||s==="next"||s==="previous")U.shift(),s+=" "+Lv(U,Jv);m.from=s}else if(l==="target"&&U[0]===":")U.shift(),m.target=Lv(U,Jv);else if(l==="throttle"&&U[0]===":")U.shift(),m.throttle=Tv(Lv(U,Jv));else if(l==="queue"&&U[0]===":")U.shift(),m.queue=Lv(U,Jv);else if((l==="root"||l==="threshold")&&U[0]===":")U.shift(),m[l]=Lv(U,Jv);else Bv(v,"htmx:syntax:error",{token:U.shift()})}_.push(m)}if(U.length===P)Bv(v,"htmx:syntax:error",{token:U.shift()});Lv(U,R0)}while(U[0]===","&&U.shift())}if(_.length>0)return _;else if(Wv(v,"form"))return[{trigger:"submit"}];else if(Wv(v,'input[type="button"], input[type="submit"]'))return[{trigger:"click"}];else if(Wv(v,Dy))return[{trigger:"change"}];else return[{trigger:"click"}]}function Ey(v){i(v).cancelled=!0}function Hy(v,R,_){var U=i(v);U.timeout=setTimeout(function(){if(g(v)&&U.cancelled!==!0){if(!l0(_,v,Y0("hx:poll:trigger",{triggerSpec:_,target:v})))R(v);Hy(v,R,_)}},_.pollInterval)}function my(v){return location.hostname===v.hostname&&Rv(v,"href")&&Rv(v,"href").indexOf("#")!==0}function Ky(v,R,_){if(v.tagName==="A"&&my(v)&&(v.target===""||v.target==="_self")||v.tagName==="FORM"){R.boosted=!0;var U,P;if(v.tagName==="A")U="get",P=v.href;else{var d=Rv(v,"method");U=d?d.toLowerCase():"get",P=Rv(v,"action")}_.forEach(function(w){L0(v,function(Z,m){if(f(Z,k.config.disableSelector)){Nv(Z);return}iv(U,P,Z,m)},R,w,!0)})}}function S0(v,R){if(v.type==="submit"||v.type==="click"){if(R.tagName==="FORM")return!0;if(Wv(R,'input[type="submit"], button')&&f(R,"form")!==null)return!0;if(R.tagName==="A"&&R.href&&(R.getAttribute("href")==="#"||R.getAttribute("href").indexOf("#")!==0))return!0}return!1}function cy(v,R){return i(v).boosted&&v.tagName==="A"&&R.type==="click"&&(R.ctrlKey||R.metaKey)}function l0(v,R,_){var U=v.eventFilter;if(U)try{return U.call(R,_)!==!0}catch(P){return Bv(a().body,"htmx:eventFilter:error",{error:P,source:U.source}),!0}return!1}function L0(v,R,_,U,P){var d=i(v),w;if(U.from)w=B(v,U.from);else w=[v];if(U.changed)w.forEach(function(Z){var m=i(Z);m.lastValue=Z.value});e(w,function(Z){var m=function(l){if(!g(v)){Z.removeEventListener(U.trigger,m);return}if(cy(v,l))return;if(P||S0(l,v))l.preventDefault();if(l0(U,v,l))return;var s=i(l);if(s.triggerSpec=U,s.handledFor==null)s.handledFor=[];if(s.handledFor.indexOf(v)<0){if(s.handledFor.push(v),U.consume)l.stopPropagation();if(U.target&&l.target){if(!Wv(l.target,U.target))return}if(U.once)if(d.triggeredOnce)return;else d.triggeredOnce=!0;if(U.changed){var vv=i(Z);if(vv.lastValue===Z.value)return;vv.lastValue=Z.value}if(d.delayed)clearTimeout(d.delayed);if(d.throttle)return;if(U.throttle){if(!d.throttle)R(v,l),d.throttle=setTimeout(function(){d.throttle=null},U.throttle)}else if(U.delay)d.delayed=setTimeout(function(){R(v,l)},U.delay);else n(v,"htmx:trigger"),R(v,l)}};if(_.listenerInfos==null)_.listenerInfos=[];_.listenerInfos.push({trigger:U.trigger,listener:m,on:Z}),Z.addEventListener(U.trigger,m)})}var u0=!1,s0=null;function Gy(){if(!s0)s0=function(){u0=!0},window.addEventListener("scroll",s0),setInterval(function(){if(u0)u0=!1,e(a().querySelectorAll("[hx-trigger='revealed'],[data-hx-trigger='revealed']"),function(v){Ty(v)})},200)}function Ty(v){if(!Ov(v,"data-hx-revealed")&&O0(v)){v.setAttribute("data-hx-revealed","true");var R=i(v);if(R.initHash)n(v,"revealed");else v.addEventListener("htmx:afterProcessNode",function(_){n(v,"revealed")},{once:!0})}}function fy(v,R,_){var U=D(_);for(var P=0;P<U.length;P++){var d=U[P].split(/:(.+)/);if(d[0]==="connect")Vy(v,d[1],0);if(d[0]==="send")Sy(v)}}function Vy(v,R,_){if(!g(v))return;if(R.indexOf("/")==0){var U=location.hostname+(location.port?":"+location.port:"");if(location.protocol=="https:")R="wss://"+U+R;else if(location.protocol=="http:")R="ws://"+U+R}var P=k.createWebSocket(R);P.onerror=function(d){Bv(v,"htmx:wsError",{error:d,socket:P}),$y(v)},P.onclose=function(d){if([1006,1012,1013].indexOf(d.code)>=0){var w=ly(_);setTimeout(function(){Vy(v,R,_+1)},w)}},P.onopen=function(d){_=0},i(v).webSocket=P,P.addEventListener("message",function(d){if($y(v))return;var w=d.data;T0(v,function(uv){w=uv.transformResponse(w,null,v)});var Z=V0(v),m=ev(w),l=I0(m.children);for(var s=0;s<l.length;s++){var vv=l[s];t(Dv(vv,"hx-swap-oob")||"true",vv,Z)}N0(Z.tasks)})}function $y(v){if(!g(v))return i(v).webSocket.close(),!0}function Sy(v){var R=rv(v,function(_){return i(_).webSocket!=null});if(R)v.addEventListener(f0(v)[0].trigger,function(_){var U=i(R).webSocket,P=r0(v,R),d=h0(v,"post"),w=d.errors,Z=d.values,m=gy(v),l=$(Z,m),s=e0(l,v);if(s.HEADERS=P,w&&w.length>0){n(v,"htmx:validation:halted",w);return}if(U.send(JSON.stringify(s)),S0(_,v))_.preventDefault()});else Bv(v,"htmx:noWebSocketSourceError")}function ly(v){var R=k.config.wsReconnectDelay;if(typeof R==="function")return R(v);if(R==="full-jitter"){var _=Math.min(v,6),U=1000*Math.pow(2,_);return U*Math.random()}v0('htmx.config.wsReconnectDelay must either be a function or the string "full-jitter"')}function uy(v,R,_){var U=D(_);for(var P=0;P<U.length;P++){var d=U[P].split(/:(.+)/);if(d[0]==="connect")sy(v,d[1]);if(d[0]==="swap")oy(v,d[1])}}function sy(v,R){var _=k.createEventSource(R);_.onerror=function(U){Bv(v,"htmx:sseError",{error:U,source:_}),o0(v)},i(v).sseEventSource=_}function oy(v,R){var _=rv(v,Py);if(_){var U=i(_).sseEventSource,P=function(d){if(o0(_))return;if(!g(v)){U.removeEventListener(R,P);return}var w=d.data;T0(v,function(s){w=s.transformResponse(w,null,v)});var Z=vy(v),m=W(v),l=V0(v);wv(Z.swapStyle,m,v,w,l),N0(l.tasks),n(v,"htmx:sseMessage",d)};i(v).sseListener=P,U.addEventListener(R,P)}else Bv(v,"htmx:noSSESourceError")}function ay(v,R,_){var U=rv(v,Py);if(U){var P=i(U).sseEventSource,d=function(){if(!o0(U))if(g(v))R(v);else P.removeEventListener(_,d)};i(v).sseListener=d,P.addEventListener(_,d)}else Bv(v,"htmx:noSSESourceError")}function o0(v){if(!g(v))return i(v).sseEventSource.close(),!0}function Py(v){return i(v).sseEventSource!=null}function iy(v,R,_,U){var P=function(){if(!_.loaded)_.loaded=!0,R(v)};if(U)setTimeout(P,U);else P()}function ny(v,R,_){var U=!1;return e(Hv,function(P){if(Ov(v,"hx-"+P)){var d=Dv(v,"hx-"+P);U=!0,R.path=d,R.verb=P,_.forEach(function(w){a0(v,w,R,function(Z,m){if(f(Z,k.config.disableSelector)){Nv(Z);return}iv(P,d,Z,m)})})}}),U}function a0(v,R,_,U){if(R.sseEvent)ay(v,U,R.sseEvent);else if(R.trigger==="revealed")Gy(),L0(v,U,_,R),Ty(v);else if(R.trigger==="intersect"){var P={};if(R.root)P.root=z(v,R.root);if(R.threshold)P.threshold=parseFloat(R.threshold);var d=new IntersectionObserver(function(w){for(var Z=0;Z<w.length;Z++){var m=w[Z];if(m.isIntersecting){n(v,"intersect");break}}},P);d.observe(v),L0(v,U,_,R)}else if(R.trigger==="load"){if(!l0(R,v,Y0("load",{elt:v})))iy(v,U,_,R.delay)}else if(R.pollInterval)_.polling=!0,Hy(v,U,R);else L0(v,U,_,R)}function Xy(v){if(v.type==="text/javascript"||v.type==="module"||v.type===""){var R=a().createElement("script");if(e(v.attributes,function(U){R.setAttribute(U.name,U.value)}),R.textContent=v.textContent,R.async=!1,k.config.inlineScriptNonce)R.nonce=k.config.inlineScriptNonce;var _=v.parentElement;try{_.insertBefore(R,v)}catch(U){v0(U)}finally{if(v.parentElement)v.parentElement.removeChild(v)}}}function ty(v){if(Wv(v,"script"))Xy(v);e(Q(v,"script"),function(R){Xy(R)})}function ry(){return document.querySelector("[hx-boost], [data-hx-boost]")}function ey(v){if(!document.evaluate)return[];let R=null;const _=[],U=document.evaluate('//*[@*[ starts-with(name(), "hx-on:") or starts-with(name(), "data-hx-on:") ]]',v);while(R=U.iterateNext())_.push(R);return _}function v2(v){if(v.querySelectorAll){var R=ry()?", a":"",_=v.querySelectorAll(o+R+", form, [type='submit'], [hx-sse], [data-hx-sse], [hx-ws], [data-hx-ws], [hx-ext], [data-hx-ext], [hx-trigger], [data-hx-trigger], [hx-on], [data-hx-on]");return _}else return[]}function y2(v){var R=F("#"+Rv(v,"form"))||f(v,"form");if(!R)return;var _=function(U){var P=f(U.target,"button, input[type='submit']");if(P!==null){var d=i(R);d.lastButtonClicked=P}};v.addEventListener("click",_),v.addEventListener("focusin",_),v.addEventListener("focusout",function(U){var P=i(R);P.lastButtonClicked=null})}function g2(v){var R=av(v),_=0;for(let U=0;U<R.length;U++){const P=R[U];if(P==="{")_++;else if(P==="}")_--}return _}function jy(v,R,_){var U=i(v);U.onHandlers=[];var P=new Function("event",_+"; return;"),d=function(w){return P.call(v,w)};return v.addEventListener(R,d),U.onHandlers.push({event:R,listener:d}),{nodeData:U,code:_,func:P,listener:d}}function R2(v){var R=Dv(v,"hx-on");if(R&&k.config.allowEval){var _={},U=R.split("\n"),P=null,d=0;while(U.length>0){var w=U.shift(),Z=w.match(/^\s*([a-zA-Z:\-]+:)(.*)/);if(d===0&&Z)w.split(":"),P=Z[1].slice(0,-1),_[P]=Z[2];else _[P]+=w;d+=g2(w)}for(var m in _)jy(v,m,_[m])}}function _2(v){$v(v);for(var R=0;R<v.attributes.length;R++){var _=v.attributes[R].name,U=v.attributes[R].value;if(_.startsWith("hx-on:")||_.startsWith("data-hx-on:")){let P=_.slice(_.indexOf(":")+1);if(P.startsWith(":"))P="htmx"+P;jy(v,P,U)}}}function Iy(v){if(f(v,k.config.disableSelector)){Nv(v);return}var R=i(v);if(R.initHash!==dv(v)){if(Mv(v),R.initHash=dv(v),R2(v),n(v,"htmx:beforeProcessNode"),v.value)R.lastValue=v.value;var _=f0(v),U=ny(v,R,_);if(!U){if(Fv(v,"hx-boost")==="true")Ky(v,R,_);else if(Ov(v,"hx-trigger"))_.forEach(function(w){a0(v,w,R,function(){})})}if(v.tagName==="FORM"||Rv(v,"type")==="submit"&&Ov(v,"form"))y2(v);var P=Dv(v,"hx-sse");if(P)uy(v,R,P);var d=Dv(v,"hx-ws");if(d)fy(v,R,d);n(v,"htmx:afterProcessNode")}}function i0(v){if(v=F(v),f(v,k.config.disableSelector)){Nv(v);return}Iy(v),e(v2(v),function(R){Iy(R)}),e(ey(v),_2)}function z2(v){return v.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}function Y0(v,R){var _;if(window.CustomEvent&&typeof window.CustomEvent==="function")_=new CustomEvent(v,{bubbles:!0,cancelable:!0,detail:R});else _=a().createEvent("CustomEvent"),_.initCustomEvent(v,!0,!0,R);return _}function Bv(v,R,_){n(v,R,$({error:R},_))}function B2(v){return v==="htmx:afterProcessNode"}function T0(v,R){e(J0(v),function(_){try{R(_)}catch(U){v0(U)}})}function v0(v){if(console.error)console.error(v);else if(console.log)console.log("ERROR: ",v)}function n(v,R,_){if(v=F(v),_==null)_={};_.elt=v;var U=Y0(R,_);if(k.logger&&!B2(R))k.logger(v,R,_);if(_.error)v0(_.error),n(v,"htmx:error",{errorInfo:_});var P=v.dispatchEvent(U),d=z2(R);if(P&&d!==R){var w=Y0(d,U.detail);P=P&&v.dispatchEvent(w)}return T0(v,function(Z){P=P&&Z.onEvent(R,U)!==!1}),P}var M0=location.pathname+location.search;function n0(){var v=a().querySelector("[hx-history-elt],[data-hx-history-elt]");return v||a().body}function F2(v,R,_,U){if(!N())return;v=Y(v);var P=j(localStorage.getItem("htmx-history-cache"))||[];for(var d=0;d<P.length;d++)if(P[d].url===v){P.splice(d,1);break}var w={url:v,content:R,title:_,scroll:U};n(a().body,"htmx:historyItemCreated",{item:w,cache:P}),P.push(w);while(P.length>k.config.historyCacheSize)P.shift();while(P.length>0)try{localStorage.setItem("htmx-history-cache",JSON.stringify(P));break}catch(Z){Bv(a().body,"htmx:historyCacheError",{cause:Z,cache:P}),P.shift()}}function U2(v){if(!N())return null;v=Y(v);var R=j(localStorage.getItem("htmx-history-cache"))||[];for(var _=0;_<R.length;_++)if(R[_].url===v)return R[_];return null}function A2(v){var R=k.config.requestClass,_=v.cloneNode(!0);return e(Q(_,"."+R),function(U){h(U,R)}),_.innerHTML}function t0(){var v=n0(),R=M0||location.pathname+location.search,_=a().querySelector('[hx-history="false" i],[data-hx-history="false" i]');if(!_)n(a().body,"htmx:beforeHistorySave",{path:R,historyElt:v}),F2(R,A2(v),a().title,window.scrollY);if(k.config.historyEnabled)history.replaceState({htmx:!0},a().title,window.location.href)}function Oy(v){if(k.config.getCacheBusterParam){if(v=v.replace(/org\.htmx\.cache-buster=[^&]*&?/,""),v.endsWith("&")||v.endsWith("?"))v=v.slice(0,-1)}if(k.config.historyEnabled)history.pushState({htmx:!0},"",v);M0=v}function D2(v){if(k.config.historyEnabled)history.replaceState({htmx:!0},"",v);M0=v}function N0(v){e(v,function(R){R.call()})}function H2(v){var R=new XMLHttpRequest,_={path:v,xhr:R};n(a().body,"htmx:historyCacheMiss",_),R.open("GET",v,!0),R.setRequestHeader("HX-History-Restore-Request","true"),R.onload=function(){if(this.status>=200&&this.status<400){n(a().body,"htmx:historyCacheMissLoad",_);var U=ev(this.response);U=U.querySelector("[hx-history-elt],[data-hx-history-elt]")||U;var P=n0(),d=V0(P),w=r(this.response);if(w){var Z=q("title");if(Z)Z.innerHTML=w;else window.document.title=w}Uv(P,U,d),N0(d.tasks),M0=v,n(a().body,"htmx:historyRestore",{path:v,cacheMiss:!0,serverResponse:this.response})}else Bv(a().body,"htmx:historyCacheMissLoadError",_)},R.send()}function T2(v){t0(),v=v||location.pathname+location.search;var R=U2(v);if(R){var _=ev(R.content),U=n0(),P=V0(U);Uv(U,_,P),N0(P.tasks),document.title=R.title,setTimeout(function(){window.scrollTo(0,R.scroll)},0),M0=v,n(a().body,"htmx:historyRestore",{path:v,item:R})}else if(k.config.refreshOnHistoryMiss)window.location.reload(!0);else H2(v)}function V2(v){var R=p(v,"hx-indicator");if(R==null)R=[v];return e(R,function(_){var U=i(_);U.requestCount=(U.requestCount||0)+1,_.classList.add.call(_.classList,k.config.requestClass)}),R}function Z0(v){e(v,function(R){var _=i(R);if(_.requestCount=(_.requestCount||0)-1,_.requestCount===0)R.classList.remove.call(R.classList,k.config.requestClass)})}function $2(v,R){for(var _=0;_<v.length;_++){var U=v[_];if(U.isSameNode(R))return!0}return!1}function P2(v){if(v.name===""||v.name==null||v.disabled)return!1;if(v.type==="button"||v.type==="submit"||v.tagName==="image"||v.tagName==="reset"||v.tagName==="file")return!1;if(v.type==="checkbox"||v.type==="radio")return v.checked;return!0}function by(v,R,_){if(v!=null&&R!=null){var U=_[v];if(U===void 0)_[v]=R;else if(Array.isArray(U))if(Array.isArray(R))_[v]=U.concat(R);else U.push(R);else if(Array.isArray(R))_[v]=[U].concat(R);else _[v]=[U,R]}}function W0(v,R,_,U,P){if(U==null||$2(v,U))return;else v.push(U);if(P2(U)){var d=Rv(U,"name"),w=U.value;if(U.multiple)w=I0(U.querySelectorAll("option:checked")).map(function(m){return m.value});if(U.files)w=I0(U.files);if(by(d,w,R),P)X2(U,_)}if(Wv(U,"form")){var Z=U.elements;e(Z,function(m){W0(v,R,_,m,P)})}}function X2(v,R){if(v.willValidate){if(n(v,"htmx:validation:validate"),!v.checkValidity())R.push({elt:v,message:v.validationMessage,validity:v.validity}),n(v,"htmx:validation:failed",{message:v.validationMessage,validity:v.validity})}}function h0(v,R){var _=[],U={},P={},d=[],w=i(v),Z=Wv(v,"form")&&v.noValidate!==!0||Dv(v,"hx-validate")==="true";if(w.lastButtonClicked)Z=Z&&w.lastButtonClicked.formNoValidate!==!0;if(R!=="get")W0(_,P,d,f(v,"form"),Z);if(W0(_,U,d,v,Z),w.lastButtonClicked||v.tagName==="BUTTON"||v.tagName==="INPUT"&&Rv(v,"type")==="submit"){var m=w.lastButtonClicked||v,l=Rv(m,"name");by(l,m.value,P)}var s=p(v,"hx-include");return e(s,function(vv){if(W0(_,U,d,vv,Z),!Wv(vv,"form"))e(vv.querySelectorAll(Dy),function(uv){W0(_,U,d,uv,Z)})}),U=$(U,P),{errors:d,values:U}}function py(v,R,_){if(v!=="")v+="&";if(String(_)==="[object Object]")_=JSON.stringify(_);var U=encodeURIComponent(_);return v+=encodeURIComponent(R)+"="+U,v}function My(v){var R="";for(var _ in v)if(v.hasOwnProperty(_)){var U=v[_];if(Array.isArray(U))e(U,function(P){R=py(R,_,P)});else R=py(R,_,U)}return R}function j2(v){var R=new FormData;for(var _ in v)if(v.hasOwnProperty(_)){var U=v[_];if(Array.isArray(U))e(U,function(P){R.append(_,P)});else R.append(_,U)}return R}function r0(v,R,_){var U={"HX-Request":"true","HX-Trigger":Rv(v,"id"),"HX-Trigger-Name":Rv(v,"name"),"HX-Target":Dv(R,"id"),"HX-Current-URL":a().location.href};if(d0(v,"hx-headers",!1,U),_!==void 0)U["HX-Prompt"]=_;if(i(v).boosted)U["HX-Boosted"]="true";return U}function e0(v,R){var _=Fv(R,"hx-params");if(_)if(_==="none")return{};else if(_==="*")return v;else if(_.indexOf("not ")===0)return e(_.substr(4).split(","),function(P){P=P.trim(),delete v[P]}),v;else{var U={};return e(_.split(","),function(P){P=P.trim(),U[P]=v[P]}),U}else return v}function I2(v){return Rv(v,"href")&&Rv(v,"href").indexOf("#")>=0}function vy(v,R){var _=R?R:Fv(v,"hx-swap"),U={swapStyle:i(v).boosted?"innerHTML":k.config.defaultSwapStyle,swapDelay:k.config.defaultSwapDelay,settleDelay:k.config.defaultSettleDelay};if(i(v).boosted&&!I2(v))U.show="top";if(_){var P=D(_);if(P.length>0){U.swapStyle=P[0];for(var d=1;d<P.length;d++){var w=P[d];if(w.indexOf("swap:")===0)U.swapDelay=Tv(w.substr(5));if(w.indexOf("settle:")===0)U.settleDelay=Tv(w.substr(7));if(w.indexOf("transition:")===0)U.transition=w.substr(11)==="true";if(w.indexOf("scroll:")===0){var Z=w.substr(7),m=Z.split(":"),l=m.pop(),s=m.length>0?m.join(":"):null;U.scroll=l,U.scrollTarget=s}if(w.indexOf("show:")===0){var vv=w.substr(5),m=vv.split(":"),uv=m.pop(),s=m.length>0?m.join(":"):null;U.show=uv,U.showTarget=s}if(w.indexOf("focus-scroll:")===0){var sv=w.substr(13);U.focusScroll=sv=="true"}}}}return U}function Ny(v){return Fv(v,"hx-encoding")==="multipart/form-data"||Wv(v,"form")&&Rv(v,"enctype")==="multipart/form-data"}function O2(v,R,_){var U=null;if(T0(R,function(P){if(U==null)U=P.encodeParameters(v,_,R)}),U!=null)return U;else if(Ny(R))return j2(_);else return My(_)}function V0(v){return{tasks:[],elts:[v]}}function b2(v,R){var _=v[0],U=v[v.length-1];if(R.scroll){var P=null;if(R.scrollTarget)P=z(_,R.scrollTarget);if(R.scroll==="top"&&(_||P))P=P||_,P.scrollTop=0;if(R.scroll==="bottom"&&(U||P))P=P||U,P.scrollTop=P.scrollHeight}if(R.show){var P=null;if(R.showTarget){var d=R.showTarget;if(R.showTarget==="window")d="body";P=z(_,d)}if(R.show==="top"&&(_||P))P=P||_,P.scrollIntoView({block:"start",behavior:k.config.scrollBehavior});if(R.show==="bottom"&&(U||P))P=P||U,P.scrollIntoView({block:"end",behavior:k.config.scrollBehavior})}}function d0(v,R,_,U){if(U==null)U={};if(v==null)return U;var P=Dv(v,R);if(P){var d=P.trim(),w=_;if(d==="unset")return null;if(d.indexOf("javascript:")===0)d=d.substr(11),w=!0;else if(d.indexOf("js:")===0)d=d.substr(3),w=!0;if(d.indexOf("{")!==0)d="{"+d+"}";var Z;if(w)Z=yy(v,function(){return Function("return ("+d+")")()},{});else Z=j(d);for(var m in Z)if(Z.hasOwnProperty(m)){if(U[m]==null)U[m]=Z[m]}}return d0(Yv(v),R,_,U)}function yy(v,R,_){if(k.config.allowEval)return R();else return Bv(v,"htmx:evalDisallowedError"),_}function p2(v,R){return d0(v,"hx-vars",!0,R)}function M2(v,R){return d0(v,"hx-vals",!1,R)}function gy(v){return $(p2(v),M2(v))}function N2(v,R,_){if(_!==null)try{v.setRequestHeader(R,_)}catch(U){v.setRequestHeader(R,encodeURIComponent(_)),v.setRequestHeader(R+"-URI-AutoEncoded","true")}}function W2(v){if(v.responseURL&&typeof URL!=="undefined")try{var R=new URL(v.responseURL);return R.pathname+R.search}catch(_){Bv(a().body,"htmx:badResponseUrl",{url:v.responseURL})}}function Ev(v,R){return v.getAllResponseHeaders().match(R)}function Wy(v,R,_){if(v=v.toLowerCase(),_)if(_ instanceof Element||F0(_,"String"))return iv(v,R,null,null,{targetOverride:F(_),returnPromise:!0});else return iv(v,R,F(_.source),_.event,{handler:_.handler,headers:_.headers,values:_.values,targetOverride:F(_.target),swapOverride:_.swap,returnPromise:!0});else return iv(v,R,null,null,{returnPromise:!0})}function d2(v){var R=[];while(v)R.push(v),v=v.parentElement;return R}function iv(v,R,_,U,P,d){var w=null,Z=null;if(P=P!=null?P:{},P.returnPromise&&typeof Promise!=="undefined")var m=new Promise(function(nv,tv){w=nv,Z=tv});if(_==null)_=a().body;var l=P.handler||q2;if(!g(_))return;var s=P.targetOverride||W(_);if(s==null||s==I){Bv(_,"htmx:targetError",{target:Dv(_,"hx-target")});return}if(!d){var vv=function(){return iv(v,R,_,U,P,!0)},uv={target:s,elt:_,path:R,verb:v,triggeringEvent:U,etc:P,issueRequest:vv};if(n(_,"htmx:confirm",uv)===!1)return}var sv=_,Av=i(_),kv=Fv(_,"hx-sync"),mv=null,k0=!1;if(kv){var C0=kv.split(":"),dy=C0[0].trim();if(dy==="this")sv=b(_,"hx-sync");else sv=z(_,dy);if(kv=(C0[1]||"drop").trim(),Av=i(sv),kv==="drop"&&Av.xhr&&Av.abortable!==!0)return;else if(kv==="abort")if(Av.xhr)return;else k0=!0;else if(kv==="replace")n(sv,"htmx:abort");else if(kv.indexOf("queue")===0){var Kv=kv.split(" ");mv=(Kv[1]||"last").trim()}}if(Av.xhr)if(Av.abortable)n(sv,"htmx:abort");else{if(mv==null){if(U){var qv=i(U);if(qv&&qv.triggerSpec&&qv.triggerSpec.queue)mv=qv.triggerSpec.queue}if(mv==null)mv="last"}if(Av.queuedRequests==null)Av.queuedRequests=[];if(mv==="first"&&Av.queuedRequests.length===0)Av.queuedRequests.push(function(){iv(v,R,_,U,P)});else if(mv==="all")Av.queuedRequests.push(function(){iv(v,R,_,U,P)});else if(mv==="last")Av.queuedRequests=[],Av.queuedRequests.push(function(){iv(v,R,_,U,P)});return}var Pv=new XMLHttpRequest;Av.xhr=Pv,Av.abortable=k0;var jv=function(){if(Av.xhr=null,Av.abortable=!1,Av.queuedRequests!=null&&Av.queuedRequests.length>0){var nv=Av.queuedRequests.shift();nv()}},_0=Fv(_,"hx-prompt");if(_0){var w0=prompt(_0);if(w0===null||!n(_,"htmx:prompt",{prompt:w0,target:s}))return Zv(w),jv(),m}var q0=Fv(_,"hx-confirm");if(q0){if(!confirm(q0))return Zv(w),jv(),m}var cv=r0(_,s,w0);if(P.headers)cv=$(cv,P.headers);var Cv=h0(_,v),z0=Cv.errors,$0=Cv.values;if(P.values)$0=$($0,P.values);var B0=gy(_),wy=$($0,B0),P0=e0(wy,_);if(v!=="get"&&!Ny(_))cv["Content-Type"]="application/x-www-form-urlencoded";if(k.config.getCacheBusterParam&&v==="get")P0["org.htmx.cache-buster"]=Rv(s,"id")||"true";if(R==null||R==="")R=a().location.href;var zy=d0(_,"hx-request"),qy=i(_).boosted,E0=k.config.methodsThatUseUrlParams.indexOf(v)>=0,Gv={boosted:qy,useUrlParams:E0,parameters:P0,unfilteredParameters:wy,headers:cv,target:s,verb:v,errors:z0,withCredentials:P.credentials||zy.credentials||k.config.withCredentials,timeout:P.timeout||zy.timeout||k.config.timeout,path:R,triggeringEvent:U};if(!n(_,"htmx:configRequest",Gv))return Zv(w),jv(),m;if(R=Gv.path,v=Gv.verb,cv=Gv.headers,P0=Gv.parameters,z0=Gv.errors,E0=Gv.useUrlParams,z0&&z0.length>0)return n(_,"htmx:validation:halted",Gv),Zv(w),jv(),m;var Qy=R.split("#"),J2=Qy[0],By=Qy[1],y0=R;if(E0){y0=J2;var k2=Object.keys(P0).length!==0;if(k2){if(y0.indexOf("?")<0)y0+="?";else y0+="&";if(y0+=My(P0),By)y0+="#"+By}}if(Pv.open(v.toUpperCase(),y0,!0),Pv.overrideMimeType("text/html"),Pv.withCredentials=Gv.withCredentials,Pv.timeout=Gv.timeout,zy.noHeaders);else for(var Fy in cv)if(cv.hasOwnProperty(Fy)){var C2=cv[Fy];N2(Pv,Fy,C2)}var Qv={xhr:Pv,target:s,requestConfig:Gv,etc:P,boosted:qy,pathInfo:{requestPath:R,finalRequestPath:y0,anchor:By}};if(Pv.onload=function(){try{var nv=d2(_);if(Qv.pathInfo.responsePath=W2(Pv),l(_,Qv),Z0(m0),n(_,"htmx:afterRequest",Qv),n(_,"htmx:afterOnLoad",Qv),!g(_)){var tv=null;while(nv.length>0&&tv==null){var X0=nv.shift();if(g(X0))tv=X0}if(tv)n(tv,"htmx:afterRequest",Qv),n(tv,"htmx:afterOnLoad",Qv)}Zv(w),jv()}catch(xy){throw Bv(_,"htmx:onLoadError",$({error:xy},Qv)),xy}},Pv.onerror=function(){Z0(m0),Bv(_,"htmx:afterRequest",Qv),Bv(_,"htmx:sendError",Qv),Zv(Z),jv()},Pv.onabort=function(){Z0(m0),Bv(_,"htmx:afterRequest",Qv),Bv(_,"htmx:sendAbort",Qv),Zv(Z),jv()},Pv.ontimeout=function(){Z0(m0),Bv(_,"htmx:afterRequest",Qv),Bv(_,"htmx:timeout",Qv),Zv(Z),jv()},!n(_,"htmx:beforeRequest",Qv))return Zv(w),jv(),m;var m0=V2(_);e(["loadstart","loadend","progress","abort"],function(nv){e([Pv,Pv.upload],function(tv){tv.addEventListener(nv,function(X0){n(_,"htmx:xhr:"+nv,{lengthComputable:X0.lengthComputable,loaded:X0.loaded,total:X0.total})})})}),n(_,"htmx:beforeSend",Qv);var E2=E0?null:O2(Pv,_,P0);return Pv.send(E2),m}function w2(v,R){var _=R.xhr,U=null,P=null;if(Ev(_,/HX-Push:/i))U=_.getResponseHeader("HX-Push"),P="push";else if(Ev(_,/HX-Push-Url:/i))U=_.getResponseHeader("HX-Push-Url"),P="push";else if(Ev(_,/HX-Replace-Url:/i))U=_.getResponseHeader("HX-Replace-Url"),P="replace";if(U)if(U==="false")return{};else return{type:P,path:U};var d=R.pathInfo.finalRequestPath,w=R.pathInfo.responsePath,Z=Fv(v,"hx-push-url"),m=Fv(v,"hx-replace-url"),l=i(v).boosted,s=null,vv=null;if(Z)s="push",vv=Z;else if(m)s="replace",vv=m;else if(l)s="push",vv=w||d;if(vv){if(vv==="false")return{};if(vv==="true")vv=w||d;if(R.pathInfo.anchor&&vv.indexOf("#")===-1)vv=vv+"#"+R.pathInfo.anchor;return{type:s,path:vv}}else return{}}function q2(v,R){var{xhr:_,target:U,etc:P}=R;if(!n(v,"htmx:beforeOnLoad",R))return;if(Ev(_,/HX-Trigger:/i))Sv(_,"HX-Trigger",v);if(Ev(_,/HX-Location:/i)){t0();var d=_.getResponseHeader("HX-Location"),w;if(d.indexOf("{")===0)w=j(d),d=w.path,delete w.path;Wy("GET",d,w).then(function(){Oy(d)});return}if(Ev(_,/HX-Redirect:/i)){location.href=_.getResponseHeader("HX-Redirect");return}if(Ev(_,/HX-Refresh:/i)){if(_.getResponseHeader("HX-Refresh")==="true"){location.reload();return}}if(Ev(_,/HX-Retarget:/i))R.target=a().querySelector(_.getResponseHeader("HX-Retarget"));var Z=w2(v,R),m=_.status>=200&&_.status<400&&_.status!==204,l=_.response,s=_.status>=400,vv=$({shouldSwap:m,serverResponse:l,isError:s},R);if(!n(U,"htmx:beforeSwap",vv))return;if(U=vv.target,l=vv.serverResponse,s=vv.isError,R.target=U,R.failed=s,R.successful=!s,vv.shouldSwap){if(_.status===286)Ey(v);if(T0(v,function(Kv){l=Kv.transformResponse(l,_,v)}),Z.type)t0();var uv=P.swapOverride;if(Ev(_,/HX-Reswap:/i))uv=_.getResponseHeader("HX-Reswap");var w=vy(v,uv);U.classList.add(k.config.swappingClass);var sv=null,Av=null,kv=function(){try{var Kv=document.activeElement,qv={};try{qv={elt:Kv,start:Kv?Kv.selectionStart:null,end:Kv?Kv.selectionEnd:null}}catch(Cv){}var Pv;if(Ev(_,/HX-Reselect:/i))Pv=_.getResponseHeader("HX-Reselect");var jv=V0(U);if(wv(w.swapStyle,U,v,l,jv,Pv),qv.elt&&!g(qv.elt)&&Rv(qv.elt,"id")){var _0=document.getElementById(Rv(qv.elt,"id")),w0={preventScroll:w.focusScroll!==void 0?!w.focusScroll:!k.config.defaultFocusScroll};if(_0){if(qv.start&&_0.setSelectionRange)try{_0.setSelectionRange(qv.start,qv.end)}catch(Cv){}_0.focus(w0)}}if(U.classList.remove(k.config.swappingClass),e(jv.elts,function(Cv){if(Cv.classList)Cv.classList.add(k.config.settlingClass);n(Cv,"htmx:afterSwap",R)}),Ev(_,/HX-Trigger-After-Swap:/i)){var q0=v;if(!g(v))q0=a().body;Sv(_,"HX-Trigger-After-Swap",q0)}var cv=function(){if(e(jv.tasks,function(B0){B0.call()}),e(jv.elts,function(B0){if(B0.classList)B0.classList.remove(k.config.settlingClass);n(B0,"htmx:afterSettle",R)}),Z.type)if(Z.type==="push")Oy(Z.path),n(a().body,"htmx:pushedIntoHistory",{path:Z.path});else D2(Z.path),n(a().body,"htmx:replacedInHistory",{path:Z.path});if(R.pathInfo.anchor){var Cv=q("#"+R.pathInfo.anchor);if(Cv)Cv.scrollIntoView({block:"start",behavior:"auto"})}if(jv.title){var z0=q("title");if(z0)z0.innerHTML=jv.title;else window.document.title=jv.title}if(b2(jv.elts,w),Ev(_,/HX-Trigger-After-Settle:/i)){var $0=v;if(!g(v))$0=a().body;Sv(_,"HX-Trigger-After-Settle",$0)}Zv(sv)};if(w.settleDelay>0)setTimeout(cv,w.settleDelay);else cv()}catch(Cv){throw Bv(v,"htmx:swapError",R),Zv(Av),Cv}},mv=k.config.globalViewTransitions;if(w.hasOwnProperty("transition"))mv=w.transition;if(mv&&n(v,"htmx:beforeTransition",R)&&typeof Promise!=="undefined"&&document.startViewTransition){var k0=new Promise(function(Kv,qv){sv=Kv,Av=qv}),C0=kv;kv=function(){document.startViewTransition(function(){return C0(),k0})}}if(w.swapDelay>0)setTimeout(kv,w.swapDelay);else kv()}if(s)Bv(v,"htmx:responseError",$({error:"Response Status Error Code "+_.status+" from "+R.pathInfo.requestPath},R))}var Ry={};function Q2(){return{init:function(v){return null},onEvent:function(v,R){return!0},transformResponse:function(v,R,_){return v},isInlineSwap:function(v){return!1},handleSwap:function(v,R,_,U){return!1},encodeParameters:function(v,R,_){return null}}}function x2(v,R){if(R.init)R.init(Xv);Ry[v]=$(Q2(),R)}function L2(v){delete Ry[v]}function J0(v,R,_){if(v==void 0)return R;if(R==void 0)R=[];if(_==void 0)_=[];var U=Dv(v,"hx-ext");if(U)e(U.split(","),function(P){if(P=P.replace(/ /g,""),P.slice(0,7)=="ignore:"){_.push(P.slice(7));return}if(_.indexOf(P)<0){var d=Ry[P];if(d&&R.indexOf(d)<0)R.push(d)}});return J0(Yv(v),R,_)}function _y(v){if(a().readyState!=="loading")v();else a().addEventListener("DOMContentLoaded",v)}function Y2(){if(k.config.includeIndicatorStyles!==!1)a().head.insertAdjacentHTML("beforeend","<style>                      ."+k.config.indicatorClass+"{opacity:0;transition: opacity 200ms ease-in;}                      ."+k.config.requestClass+" ."+k.config.indicatorClass+"{opacity:1}                      ."+k.config.requestClass+"."+k.config.indicatorClass+"{opacity:1}                    </style>")}function Z2(){var v=a().querySelector('meta[name="htmx-config"]');if(v)return j(v.content);else return null}function h2(){var v=Z2();if(v)k.config=$(k.config,v)}return _y(function(){h2(),Y2();var v=a().body;i0(v);var R=a().querySelectorAll("[hx-trigger='restored'],[data-hx-trigger='restored']");v.addEventListener("htmx:abort",function(U){var P=U.target,d=i(P);if(d&&d.xhr)d.xhr.abort()});var _=window.onpopstate;window.onpopstate=function(U){if(U.state&&U.state.htmx)T2(),e(R,function(P){n(P,"htmx:restored",{document:a(),triggerEvent:n})});else if(_)_(U)},setTimeout(function(){n(v,"htmx:load",{}),v=null},0)}),k}()})});var Cy=Zy((Uy,ky)=>{(function(k,Xv){const Hv=Xv(k);if(typeof Uy==="object"&&typeof Uy.nodeName!=="string")ky.exports=Hv;else if(k._hyperscript=Hv,("document"in k))k._hyperscript.browserInit()})(typeof self!=="undefined"?self:Uy,(k)=>{const Xv={dynamicResolvers:[function(g,D){if(g==="Fixed")return Number(D).toFixed();else if(g.indexOf("Fixed:")===0){let $=g.split(":")[1];return Number(D).toFixed(parseInt($))}}],String:function(g){if(g.toString)return g.toString();else return""+g},Int:function(g){return parseInt(g)},Float:function(g){return parseFloat(g)},Number:function(g){return Number(g)},Date:function(g){return new Date(g)},Array:function(g){return Array.from(g)},JSON:function(g){return JSON.stringify(g)},Object:function(g){if(g instanceof String)g=g.toString();if(typeof g==="string")return JSON.parse(g);else return Object.assign({},g)}},Hv={attributes:"_, script, data-script",defaultTransition:"all 500ms ease-in",disableSelector:"[disable-scripting], [data-disable-scripting]",hideShowStrategies:{},conversions:Xv};class o{static OP_TABLE={"+":"PLUS","-":"MINUS","*":"MULTIPLY","/":"DIVIDE",".":"PERIOD","..":"ELLIPSIS","\\":"BACKSLASH",":":"COLON","%":"PERCENT","|":"PIPE","!":"EXCLAMATION","?":"QUESTION","#":"POUND","&":"AMPERSAND",$:"DOLLAR",";":"SEMI",",":"COMMA","(":"L_PAREN",")":"R_PAREN","<":"L_ANG",">":"R_ANG","<=":"LTE_ANG",">=":"GTE_ANG","==":"EQ","===":"EQQ","!=":"NEQ","!==":"NEQQ","{":"L_BRACE","}":"R_BRACE","[":"L_BRACKET","]":"R_BRACKET","=":"EQUALS"};static isValidCSSClassChar(g){return o.isAlpha(g)||o.isNumeric(g)||g==="-"||g==="_"||g===":"}static isValidCSSIDChar(g){return o.isAlpha(g)||o.isNumeric(g)||g==="-"||g==="_"||g===":"}static isWhitespace(g){return g===" "||g==="\t"||o.isNewline(g)}static positionString(g){return"[Line: "+g.line+", Column: "+g.column+"]"}static isNewline(g){return g==="\r"||g==="\n"}static isNumeric(g){return g>="0"&&g<="9"}static isAlpha(g){return g>="a"&&g<="z"||g>="A"&&g<="Z"}static isIdentifierChar(g,D){return g==="_"||g==="$"}static isReservedChar(g){return g==="`"||g==="^"}static isValidSingleQuoteStringStart(g){if(g.length>0){var D=g[g.length-1];if(D.type==="IDENTIFIER"||D.type==="CLASS_REF"||D.type==="ID_REF")return!1;if(D.op&&(D.value===">"||D.value===")"))return!1}return!0}static tokenize(g,D){var $=[],j=g,N=0,Y=0,M=1,O="<START>",X=0;function L(){return D&&X===0}while(N<j.length)if(F()==="-"&&A()==="-"&&(o.isWhitespace(T(2))||T(2)===""||T(2)==="-")||F()==="/"&&A()==="/"&&(o.isWhitespace(T(2))||T(2)===""||T(2)==="/"))E();else if(F()==="/"&&A()==="*"&&(o.isWhitespace(T(2))||T(2)===""||T(2)==="*"))x();else if(o.isWhitespace(F()))$.push(p());else if(!I()&&F()==="."&&(o.isAlpha(A())||A()==="{"||A()==="-"))$.push(h());else if(!I()&&F()==="#"&&(o.isAlpha(A())||A()==="{"))$.push(u());else if(F()==="["&&A()==="@")$.push(K());else if(F()==="@")$.push(G());else if(F()==="*"&&o.isAlpha(A()))$.push(f());else if(o.isAlpha(F())||!L()&&o.isIdentifierChar(F()))$.push(B());else if(o.isNumeric(F()))$.push(H());else if(!L()&&(F()==='"'||F()==="`"))$.push(z());else if(!L()&&F()==="'")if(o.isValidSingleQuoteStringStart($))$.push(z());else $.push(y());else if(o.OP_TABLE[F()]){if(O==="$"&&F()==="{")X++;if(F()==="}")X--;$.push(y())}else if(L()||o.isReservedChar(F()))$.push(Q("RESERVED",V()));else if(N<j.length)throw Error("Unknown token: "+F()+" ");return new Tv($,[],j);function q(b,W){var C=Q(b,W);return C.op=!0,C}function Q(b,W){return{type:b,value:W||"",start:N,end:N+1,column:Y,line:M}}function E(){while(F()&&!o.isNewline(F()))V();V()}function x(){while(F()&&!(F()==="*"&&A()==="/"))V();V(),V()}function h(){var b=Q("CLASS_REF"),W=V();if(F()==="{"){b.template=!0,W+=V();while(F()&&F()!=="}")W+=V();if(F()!=="}")throw Error("Unterminated class reference");else W+=V()}else while(o.isValidCSSClassChar(F()))W+=V();return b.value=W,b.end=N,b}function K(){var b=Q("ATTRIBUTE_REF"),W=V();while(N<j.length&&F()!=="]")W+=V();if(F()==="]")W+=V();return b.value=W,b.end=N,b}function G(){var b=Q("ATTRIBUTE_REF"),W=V();while(o.isValidCSSIDChar(F()))W+=V();if(F()==="="){if(W+=V(),F()==='"'||F()==="'"){let C=z();W+=C.value}else if(o.isAlpha(F())||o.isNumeric(F())||o.isIdentifierChar(F())){let C=B();W+=C.value}}return b.value=W,b.end=N,b}function f(){var b=Q("STYLE_REF"),W=V();while(o.isAlpha(F())||F()==="-")W+=V();return b.value=W,b.end=N,b}function u(){var b=Q("ID_REF"),W=V();if(F()==="{"){b.template=!0,W+=V();while(F()&&F()!=="}")W+=V();if(F()!=="}")throw Error("Unterminated id reference");else V()}else while(o.isValidCSSIDChar(F()))W+=V();return b.value=W,b.end=N,b}function B(){var b=Q("IDENTIFIER"),W=V();while(o.isAlpha(F())||o.isNumeric(F())||o.isIdentifierChar(F()))W+=V();if(F()==="!"&&W==="beep")W+=V();return b.value=W,b.end=N,b}function H(){var b=Q("NUMBER"),W=V();while(o.isNumeric(F()))W+=V();if(F()==="."&&o.isNumeric(A()))W+=V();while(o.isNumeric(F()))W+=V();if(F()==="e"||F()==="E"){if(o.isNumeric(A()))W+=V();else if(A()==="-")W+=V(),W+=V()}while(o.isNumeric(F()))W+=V();return b.value=W,b.end=N,b}function y(){var b=q(),W=V();while(F()&&o.OP_TABLE[W+F()])W+=V();return b.type=o.OP_TABLE[W],b.value=W,b.end=N,b}function z(){var b=Q("STRING"),W=V(),C="";while(F()&&F()!==W)if(F()==="\\"){V();let J=V();if(J==="b")C+="\b";else if(J==="f")C+="\f";else if(J==="n")C+="\n";else if(J==="r")C+="\r";else if(J==="t")C+="\t";else if(J==="v")C+="\v";else C+=J}else C+=V();if(F()!==W)throw Error("Unterminated string at "+o.positionString(b));else V();return b.value=C,b.end=N,b.template=W==="`",b}function F(){return j.charAt(N)}function A(){return j.charAt(N+1)}function T(b=1){return j.charAt(N+b)}function V(){return O=F(),N++,Y++,O}function I(){return o.isAlpha(O)||o.isNumeric(O)||O===")"||O==='"'||O==="'"||O==="`"||O==="}"||O==="]"}function p(){var b=Q("WHITESPACE"),W="";while(F()&&o.isWhitespace(F())){if(o.isNewline(F()))Y=0,M++;W+=V()}return b.value=W,b.end=N,b}}tokenize(g,D){return o.tokenize(g,D)}}class Tv{constructor(g,D,$){this.tokens=g,this.consumed=D,this.source=$,this.consumeWhitespace()}get list(){return this.tokens}_lastConsumed=null;consumeWhitespace(){while(this.token(0,!0).type==="WHITESPACE")this.consumed.push(this.tokens.shift())}raiseError(g,D){Rv.raiseParseError(g,D)}requireOpToken(g){var D=this.matchOpToken(g);if(D)return D;else this.raiseError(this,"Expected '"+g+"' but found '"+this.currentToken().value+"'")}matchAnyOpToken(g,D,$){for(var j=0;j<arguments.length;j++){var N=arguments[j],Y=this.matchOpToken(N);if(Y)return Y}}matchAnyToken(g,D,$){for(var j=0;j<arguments.length;j++){var N=arguments[j],Y=this.matchToken(N);if(Y)return Y}}matchOpToken(g){if(this.currentToken()&&this.currentToken().op&&this.currentToken().value===g)return this.consumeToken()}requireTokenType(g,D,$,j){var N=this.matchTokenType(g,D,$,j);if(N)return N;else this.raiseError(this,"Expected one of "+JSON.stringify([g,D,$]))}matchTokenType(g,D,$,j){if(this.currentToken()&&this.currentToken().type&&[g,D,$,j].indexOf(this.currentToken().type)>=0)return this.consumeToken()}requireToken(g,D){var $=this.matchToken(g,D);if($)return $;else this.raiseError(this,"Expected '"+g+"' but found '"+this.currentToken().value+"'")}peekToken(g,D,$){if(D=D||0,$=$||"IDENTIFIER",this.tokens[D]&&this.tokens[D].value===g&&this.tokens[D].type===$)return this.tokens[D]}matchToken(g,D){if(this.follows.indexOf(g)!==-1)return;if(D=D||"IDENTIFIER",this.currentToken()&&this.currentToken().value===g&&this.currentToken().type===D)return this.consumeToken()}consumeToken(){var g=this.tokens.shift();return this.consumed.push(g),this._lastConsumed=g,this.consumeWhitespace(),g}consumeUntil(g,D){var $=[],j=this.token(0,!0);while((D==null||j.type!==D)&&(g==null||j.value!==g)&&j.type!=="EOF"){var N=this.tokens.shift();this.consumed.push(N),$.push(j),j=this.token(0,!0)}return this.consumeWhitespace(),$}lastWhitespace(){if(this.consumed[this.consumed.length-1]&&this.consumed[this.consumed.length-1].type==="WHITESPACE")return this.consumed[this.consumed.length-1].value;else return""}consumeUntilWhitespace(){return this.consumeUntil(null,"WHITESPACE")}hasMore(){return this.tokens.length>0}token(g,D){var $,j=0;do{if(!D)while(this.tokens[j]&&this.tokens[j].type==="WHITESPACE")j++;$=this.tokens[j],g--,j++}while(g>-1);if($)return $;else return{type:"EOF",value:"<<<EOF>>>"}}currentToken(){return this.token(0)}lastMatch(){return this._lastConsumed}static sourceFor=function(){return this.programSource.substring(this.startToken.start,this.endToken.end)};static lineFor=function(){return this.programSource.split("\n")[this.startToken.line-1]};follows=[];pushFollow(g){this.follows.push(g)}popFollow(){this.follows.pop()}clearFollows(){var g=this.follows;return this.follows=[],g}restoreFollows(g){this.follows=g}}class Rv{constructor(g){this.runtime=g,this.possessivesDisabled=!1,this.addGrammarElement("feature",function(D,$,j){if(j.matchOpToken("(")){var N=D.requireElement("feature",j);return j.requireOpToken(")"),N}var Y=D.FEATURES[j.currentToken().value||""];if(Y)return Y(D,$,j)}),this.addGrammarElement("command",function(D,$,j){if(j.matchOpToken("(")){const M=D.requireElement("command",j);return j.requireOpToken(")"),M}var N=D.COMMANDS[j.currentToken().value||""];let Y;if(N)Y=N(D,$,j);else if(j.currentToken().type==="IDENTIFIER")Y=D.parseElement("pseudoCommand",j);if(Y)return D.parseElement("indirectStatement",j,Y);return Y}),this.addGrammarElement("commandList",function(D,$,j){if(j.hasMore()){var N=D.parseElement("command",j);if(N){j.matchToken("then");const Y=D.parseElement("commandList",j);if(Y)N.next=Y;return N}}return{type:"emptyCommandListCommand",op:function(Y){return $.findNext(this,Y)},execute:function(Y){return $.unifiedExec(this,Y)}}}),this.addGrammarElement("leaf",function(D,$,j){var N=D.parseAnyOf(D.LEAF_EXPRESSIONS,j);if(N==null)return D.parseElement("symbol",j);return N}),this.addGrammarElement("indirectExpression",function(D,$,j,N){for(var Y=0;Y<D.INDIRECT_EXPRESSIONS.length;Y++){var M=D.INDIRECT_EXPRESSIONS[Y];N.endToken=j.lastMatch();var O=D.parseElement(M,j,N);if(O)return O}return N}),this.addGrammarElement("indirectStatement",function(D,$,j,N){if(j.matchToken("unless")){N.endToken=j.lastMatch();var Y=D.requireElement("expression",j),M={type:"unlessStatementModifier",args:[Y],op:function(O,X){if(X)return this.next;else return N},execute:function(O){return $.unifiedExec(this,O)}};return N.parent=M,M}return N}),this.addGrammarElement("primaryExpression",function(D,$,j){var N=D.parseElement("leaf",j);if(N)return D.parseElement("indirectExpression",j,N);D.raiseParseError(j,"Unexpected value: "+j.currentToken().value)})}use(g){return g(this),this}GRAMMAR={};COMMANDS={};FEATURES={};LEAF_EXPRESSIONS=[];INDIRECT_EXPRESSIONS=[];initElt(g,D,$){g.startToken=D,g.sourceFor=Tv.sourceFor,g.lineFor=Tv.lineFor,g.programSource=$.source}parseElement(g,D,$=void 0){var j=this.GRAMMAR[g];if(j){var N=D.currentToken(),Y=j(this,this.runtime,D,$);if(Y){this.initElt(Y,N,D),Y.endToken=Y.endToken||D.lastMatch();var $=Y.root;while($!=null)this.initElt($,N,D),$=$.root}return Y}}requireElement(g,D,$,j){var N=this.parseElement(g,D,j);if(!N)Rv.raiseParseError(D,$||"Expected "+g);return N}parseAnyOf(g,D){for(var $=0;$<g.length;$++){var j=g[$],N=this.parseElement(j,D);if(N)return N}}addGrammarElement(g,D){this.GRAMMAR[g]=D}addCommand(g,D){var $=g+"Command",j=function(N,Y,M){const O=D(N,Y,M);if(O)return O.type=$,O.execute=function(X){return X.meta.command=O,Y.unifiedExec(this,X)},O};this.GRAMMAR[$]=j,this.COMMANDS[g]=j}addFeature(g,D){var $=g+"Feature",j=function(N,Y,M){var O=D(N,Y,M);if(O)return O.isFeature=!0,O.keyword=g,O.type=$,O};this.GRAMMAR[$]=j,this.FEATURES[g]=j}addLeafExpression(g,D){this.LEAF_EXPRESSIONS.push(g),this.addGrammarElement(g,D)}addIndirectExpression(g,D){this.INDIRECT_EXPRESSIONS.push(g),this.addGrammarElement(g,D)}static createParserContext(g){var D=g.currentToken(),$=g.source,j=$.split("\n"),N=D&&D.line?D.line-1:j.length-1,Y=j[N],M=D&&D.line?D.column:Y.length-1;return Y+"\n"+" ".repeat(M)+"^^\n\n"}static raiseParseError(g,D){D=(D||"Unexpected Token : "+g.currentToken().value)+"\n\n"+Rv.createParserContext(g);var $=new Error(D);throw $.tokens=g,$}raiseParseError(g,D){Rv.raiseParseError(g,D)}parseHyperScript(g){var D=this.parseElement("hyperscript",g);if(g.hasMore())this.raiseParseError(g);if(D)return D}setParent(g,D){if(typeof g==="object"){if(g.parent=D,typeof D==="object")D.children=D.children||new Set,D.children.add(g);this.setParent(g.next,D)}}commandStart(g){return this.COMMANDS[g.value||""]}featureStart(g){return this.FEATURES[g.value||""]}commandBoundary(g){if(g.value=="end"||g.value=="then"||g.value=="else"||g.value=="otherwise"||g.value==")"||this.commandStart(g)||this.featureStart(g)||g.type=="EOF")return!0;return!1}parseStringTemplate(g){var D=[""];do if(D.push(g.lastWhitespace()),g.currentToken().value==="$"){g.consumeToken();var $=g.matchOpToken("{");if(D.push(this.requireElement("expression",g)),$)g.requireOpToken("}");D.push("")}else if(g.currentToken().value==="\\")g.consumeToken(),g.consumeToken();else{var j=g.consumeToken();D[D.length-1]+=j?j.value:""}while(g.hasMore());return D.push(g.lastWhitespace()),D}ensureTerminated(g){const D=this.runtime;var $={type:"implicitReturn",op:function(N){if(N.meta.returned=!0,N.meta.resolve)N.meta.resolve();return D.HALT},execute:function(N){}},j=g;while(j.next)j=j.next;j.next=$}}class Ov{constructor(g,D){this.lexer=g??new o,this.parser=D??new Rv(this).use(Zv).use(F0),this.parser.runtime=this}matchesSelector(g,D){var $=g.matches||g.matchesSelector||g.msMatchesSelector||g.mozMatchesSelector||g.webkitMatchesSelector||g.oMatchesSelector;return $&&$.call(g,D)}makeEvent(g,D){var $;if(k.Event&&typeof k.Event==="function")$=new Event(g,{bubbles:!0,cancelable:!0}),$.detail=D;else $=document.createEvent("CustomEvent"),$.initCustomEvent(g,!0,!0,D);return $}triggerEvent(g,D,$,j){$=$||{},$.sender=j;var N=this.makeEvent(D,$),Y=g.dispatchEvent(N);return Y}isArrayLike(g){return Array.isArray(g)||typeof NodeList!=="undefined"&&(g instanceof NodeList||g instanceof HTMLCollection)}isIterable(g){return typeof g==="object"&&(Symbol.iterator in g)&&typeof g[Symbol.iterator]==="function"}shouldAutoIterate(g){return g!=null&&g[Wv]||this.isArrayLike(g)}forEach(g,D){if(g==null);else if(this.isIterable(g))for(let j of g)D(j);else if(this.isArrayLike(g))for(var $=0;$<g.length;$++)D(g[$]);else D(g)}implicitLoop(g,D){if(this.shouldAutoIterate(g))for(let $ of g)D($);else D(g)}wrapArrays(g){var D=[];for(var $=0;$<g.length;$++){var j=g[$];if(Array.isArray(j))D.push(Promise.all(j));else D.push(j)}return D}unwrapAsyncs(g){for(var D=0;D<g.length;D++){var $=g[D];if($.asyncWrapper)g[D]=$.value;if(Array.isArray($))for(var j=0;j<$.length;j++){var N=$[j];if(N.asyncWrapper)$[j]=N.value}}}static HALT={};HALT=Ov.HALT;unifiedExec(g,D){while(!0){try{var $=this.unifiedEval(g,D)}catch(j){if(D.meta.handlingFinally)console.error(" Exception in finally block: ",j),$=Ov.HALT;else if(this.registerHyperTrace(D,j),D.meta.errorHandler&&!D.meta.handlingError){D.meta.handlingError=!0,D.locals[D.meta.errorSymbol]=j,g=D.meta.errorHandler;continue}else D.meta.currentException=j,$=Ov.HALT}if($==null){console.error(g," did not return a next element to execute! context: ",D);return}else if($.then){$.then((j)=>{this.unifiedExec(j,D)}).catch((j)=>{this.unifiedExec({op:function(){throw j}},D)});return}else if($===Ov.HALT)if(D.meta.finallyHandler&&!D.meta.handlingFinally)D.meta.handlingFinally=!0,g=D.meta.finallyHandler;else{if(D.meta.onHalt)D.meta.onHalt();if(D.meta.currentException)if(D.meta.reject){D.meta.reject(D.meta.currentException);return}else throw D.meta.currentException;else return}else g=$}}unifiedEval(g,D){var $=[D],j=!1,N=!1;if(g.args)for(var Y=0;Y<g.args.length;Y++){var M=g.args[Y];if(M==null)$.push(null);else if(Array.isArray(M)){var O=[];for(var X=0;X<M.length;X++){var L=M[X],q=L?L.evaluate(D):null;if(q){if(q.then)j=!0;else if(q.asyncWrapper)N=!0}O.push(q)}$.push(O)}else if(M.evaluate){var q=M.evaluate(D);if(q){if(q.then)j=!0;else if(q.asyncWrapper)N=!0}$.push(q)}else $.push(M)}if(j)return new Promise((Q,E)=>{$=this.wrapArrays($),Promise.all($).then(function(x){if(N)this.unwrapAsyncs(x);try{var h=g.op.apply(g,x);Q(h)}catch(K){E(K)}}).catch(function(x){E(x)})});else{if(N)this.unwrapAsyncs($);return g.op.apply(g,$)}}_scriptAttrs=null;getScriptAttributes(){if(this._scriptAttrs==null)this._scriptAttrs=Hv.attributes.replace(/ /g,"").split(",");return this._scriptAttrs}getScript(g){for(var D=0;D<this.getScriptAttributes().length;D++){var $=this.getScriptAttributes()[D];if(g.hasAttribute&&g.hasAttribute($))return g.getAttribute($)}if(g instanceof HTMLScriptElement&&g.type==="text/hyperscript")return g.innerText;return null}hyperscriptFeaturesMap=new WeakMap;getHyperscriptFeatures(g){var D=this.hyperscriptFeaturesMap.get(g);if(typeof D==="undefined"){if(g)this.hyperscriptFeaturesMap.set(g,D={})}return D}addFeatures(g,D){if(g)Object.assign(D.locals,this.getHyperscriptFeatures(g)),this.addFeatures(g.parentElement,D)}makeContext(g,D,$,j){return new j0(g,D,$,j,this)}getScriptSelector(){return this.getScriptAttributes().map(function(g){return"["+g+"]"}).join(", ")}convertValue(g,D){var $=Xv.dynamicResolvers;for(var j=0;j<$.length;j++){var N=$[j],Y=N(D,g);if(Y!==void 0)return Y}if(g==null)return null;var M=Xv[D];if(M)return M(g);throw"Unknown conversion : "+D}parse(g){const D=this.lexer,$=this.parser;var j=D.tokenize(g);if(this.parser.commandStart(j.currentToken())){var N=$.requireElement("commandList",j);if(j.hasMore())$.raiseParseError(j);return $.ensureTerminated(N),N}else if($.featureStart(j.currentToken())){var Y=$.requireElement("hyperscript",j);if(j.hasMore())$.raiseParseError(j);return Y}else{var M=$.requireElement("expression",j);if(j.hasMore())$.raiseParseError(j);return M}}evaluateNoPromise(g,D){let $=g.evaluate(D);if($.next)throw new Error(Tv.sourceFor.call(g)+" returned a Promise in a context that they are not allowed.");return $}evaluate(g,D,$){class j extends EventTarget{constructor(O){super();this.module=O}toString(){return this.module.id}}var N="document"in k?k.document.body:new j($&&$.module);D=Object.assign(this.makeContext(N,null,N,null),D||{});var Y=this.parse(g);if(Y.execute)return Y.execute(D),D.result;else if(Y.apply)return Y.apply(N,N,$),this.getHyperscriptFeatures(N);else return Y.evaluate(D);function M(){return{}}}processNode(g){var D=this.getScriptSelector();if(this.matchesSelector(g,D))this.initElement(g,g);if(g instanceof HTMLScriptElement&&g.type==="text/hyperscript")this.initElement(g,document.body);if(g.querySelectorAll)this.forEach(g.querySelectorAll(D+", [type='text/hyperscript']"),($)=>{this.initElement($,$ instanceof HTMLScriptElement&&$.type==="text/hyperscript"?document.body:$)})}initElement(g,D){if(g.closest&&g.closest(Hv.disableSelector))return;var $=this.getInternalData(g);if(!$.initialized){var j=this.getScript(g);if(j)try{$.initialized=!0,$.script=j;const M=this.lexer,O=this.parser;var N=M.tokenize(j),Y=O.parseHyperScript(N);if(!Y)return;Y.apply(D||g,g),setTimeout(()=>{this.triggerEvent(D||g,"load",{hyperscript:!0})},1)}catch(M){this.triggerEvent(g,"exception",{error:M}),console.error("hyperscript errors were found on the following element:",g,"\n\n",M.message,M.stack)}}}internalDataMap=new WeakMap;getInternalData(g){var D=this.internalDataMap.get(g);if(typeof D==="undefined")this.internalDataMap.set(g,D={});return D}typeCheck(g,D,$){if(g==null&&$)return!0;var j=Object.prototype.toString.call(g).slice(8,-1);return j===D}getElementScope(g){var D=g.meta&&g.meta.owner;if(D){var $=this.getInternalData(D),j="elementScope";if(g.meta.feature&&g.meta.feature.behavior)j=g.meta.feature.behavior+"Scope";var N=Q0($,j);return N}else return{}}isReservedWord(g){return["meta","it","result","locals","event","target","detail","sender","body"].includes(g)}isHyperscriptContext(g){return g instanceof j0}resolveSymbol(g,D,$){if(g==="me"||g==="my"||g==="I")return D.me;if(g==="it"||g==="its"||g==="result")return D.result;if(g==="you"||g==="your"||g==="yourself")return D.you;else if($==="global")return k[g];else if($==="element"){var j=this.getElementScope(D);return j[g]}else if($==="local")return D.locals[g];else{if(D.meta&&D.meta.context){var N=D.meta.context[g];if(typeof N!=="undefined")return N;if(D.meta.context.detail){if(N=D.meta.context.detail[g],typeof N!=="undefined")return N}}if(this.isHyperscriptContext(D)&&!this.isReservedWord(g))var Y=D.locals[g];else var Y=D[g];if(typeof Y!=="undefined")return Y;else{var j=this.getElementScope(D);if(Y=j[g],typeof Y!=="undefined")return Y;else return k[g]}}}setSymbol(g,D,$,j){if($==="global")k[g]=j;else if($==="element"){var N=this.getElementScope(D);N[g]=j}else if($==="local")D.locals[g]=j;else if(this.isHyperscriptContext(D)&&!this.isReservedWord(g)&&typeof D.locals[g]!=="undefined")D.locals[g]=j;else{var N=this.getElementScope(D),Y=N[g];if(typeof Y!=="undefined")N[g]=j;else if(this.isHyperscriptContext(D)&&!this.isReservedWord(g))D.locals[g]=j;else D[g]=j}}findNext(g,D){if(g)if(g.resolveNext)return g.resolveNext(D);else if(g.next)return g.next;else return this.findNext(g.parent,D)}flatGet(g,D,$){if(g!=null){var j=$(g,D);if(typeof j!=="undefined")return j;if(this.shouldAutoIterate(g)){var N=[];for(var Y of g){var M=$(Y,D);N.push(M)}return N}}}resolveProperty(g,D){return this.flatGet(g,D,($,j)=>$[j])}resolveAttribute(g,D){return this.flatGet(g,D,($,j)=>$.getAttribute&&$.getAttribute(j))}resolveStyle(g,D){return this.flatGet(g,D,($,j)=>$.style&&$.style[j])}resolveComputedStyle(g,D){return this.flatGet(g,D,($,j)=>getComputedStyle($).getPropertyValue(j))}assignToNamespace(g,D,$,j){let N;if(typeof document!=="undefined"&&g===document.body)N=k;else N=this.getHyperscriptFeatures(g);var Y;while((Y=D.shift())!==void 0){var M=N[Y];if(M==null)M={},N[Y]=M;N=M}N[$]=j}getHyperTrace(g,D){var $=[],j=g;while(j.meta.caller)j=j.meta.caller;if(j.meta.traceMap)return j.meta.traceMap.get(D,$)}registerHyperTrace(g,D){var $=[],j=null;while(g!=null)$.push(g),j=g,g=g.meta.caller;if(j.meta.traceMap==null)j.meta.traceMap=new Map;if(!j.meta.traceMap.get(D)){var N={trace:$,print:function(Y){Y=Y||console.error,Y("hypertrace /// ");var M=0;for(var O=0;O<$.length;O++)M=Math.max(M,$[O].meta.feature.displayName.length);for(var O=0;O<$.length;O++){var X=$[O];Y("  ->",X.meta.feature.displayName.padEnd(M+2),"-",X.meta.owner)}}};j.meta.traceMap.set(D,N)}}escapeSelector(g){return g.replace(/:/g,function(D){return"\\"+D})}nullCheck(g,D){if(g==null)throw new Error("'"+D.sourceFor()+"' is null")}isEmpty(g){return g==void 0||g.length===0}doesExist(g){if(g==null)return!1;if(this.shouldAutoIterate(g)){for(let D of g)return!0;return!1}return!0}getRootNode(g){if(g&&g instanceof Node){var D=g.getRootNode();if(D instanceof Document||D instanceof ShadowRoot)return D}return document}getEventQueueFor(g,D){let $=this.getInternalData(g);var j=$.eventQueues;if(j==null)j=new Map,$.eventQueues=j;var N=j.get(D);if(N==null)N={queue:[],executing:!1},j.set(D,N);return N}beepValueToConsole(g,D,$){if(this.triggerEvent(g,"hyperscript:beep",{element:g,expression:D,value:$})){var j;if($)if($ instanceof Fv)j="ElementCollection";else if($.constructor)j=$.constructor.name;else j="unknown";else j="object (null)";var N=$;if(j==="String")N='"'+N+'"';else if($ instanceof Fv)N=Array.from($);console.log("///_ BEEP! The expression ("+Tv.sourceFor.call(D).replace("beep! ","")+") evaluates to:",N,"of type "+j)}}hyperscriptUrl=("document"in k)&&document.currentScript?document.currentScript.src:null}function Dv(){return document.cookie.split("; ").map((D)=>{let $=D.split("=");return{name:$[0],value:decodeURIComponent($[1])}})}function Yv(g){document.cookie=g+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT"}function a(){for(let g of Dv())Yv(g.name)}const rv=new Proxy({},{get(g,D){if(D==="then"||D==="asyncWrapper")return null;else if(D==="length")return Dv().length;else if(D==="clear")return Yv;else if(D==="clearAll")return a;else if(typeof D==="string")if(!isNaN(D))return Dv()[parseInt(D)];else{let $=document.cookie.split("; ").find((j)=>j.startsWith(D+"="))?.split("=")[1];if($)return decodeURIComponent($)}else if(D===Symbol.iterator)return Dv()[D]},set(g,D,$){var j=null;if(typeof $==="string")j=encodeURIComponent($),j+=";samesite=lax";else{if(j=encodeURIComponent($.value),$.expires)j+=";expires="+$.maxAge;if($.maxAge)j+=";max-age="+$.maxAge;if($.partitioned)j+=";partitioned="+$.partitioned;if($.path)j+=";path="+$.path;if($.samesite)j+=";samesite="+$.path;if($.secure)j+=";secure="+$.path}return document.cookie=D+"="+j,!0}});class j0{constructor(g,D,$,j,N){this.meta={parser:N.parser,lexer:N.lexer,runtime:N,owner:g,feature:D,iterators:{},ctx:this},this.locals={cookies:rv},this.me=$,this.you=void 0,this.result=void 0,this.event=j,this.target=j?j.target:null,this.detail=j?j.detail:null,this.sender=j?j.detail?j.detail.sender:null:null,this.body=("document"in k)?document.body:null,N.addFeatures(g,this)}}class Fv{constructor(g,D,$){this._css=g,this.relativeToElement=D,this.escape=$,this[Wv]=!0}get css(){if(this.escape)return Ov.prototype.escapeSelector(this._css);else return this._css}get className(){return this._css.substr(1)}get id(){return this.className()}contains(g){for(let D of this)if(D.contains(g))return!0;return!1}get length(){return this.selectMatches().length}[Symbol.iterator](){return this.selectMatches()[Symbol.iterator]()}selectMatches(){return Ov.prototype.getRootNode(this.relativeToElement).querySelectorAll(this.css)}}const Wv=Symbol();function Q0(g,D){var $=g[D];if($)return $;else{var j={};return g[D]=j,j}}function ov(g){try{return JSON.parse(g)}catch(D){return c0(D),null}}function c0(g){if(console.error)console.error(g);else if(console.log)console.log("ERROR: ",g)}function ev(g,D){return new(g.bind.apply(g,[g].concat(D)))}function Zv(g){g.addLeafExpression("parenthesized",function(B,H,y){if(y.matchOpToken("(")){var z=y.clearFollows();try{var F=B.requireElement("expression",y)}finally{y.restoreFollows(z)}return y.requireOpToken(")"),F}}),g.addLeafExpression("string",function(B,H,y){var z=y.matchTokenType("STRING");if(!z)return;var F=z.value,A;if(z.template){var T=o.tokenize(F,!0);A=B.parseStringTemplate(T)}else A=[];return{type:"string",token:z,args:A,op:function(V){var I="";for(var p=1;p<arguments.length;p++){var b=arguments[p];if(b!==void 0)I+=b}return I},evaluate:function(V){if(A.length===0)return F;else return H.unifiedEval(this,V)}}}),g.addGrammarElement("nakedString",function(B,H,y){if(y.hasMore()){var z=y.consumeUntilWhitespace();return y.matchTokenType("WHITESPACE"),{type:"nakedString",tokens:z,evaluate:function(F){return z.map(function(A){return A.value}).join("")}}}}),g.addLeafExpression("number",function(B,H,y){var z=y.matchTokenType("NUMBER");if(!z)return;var F=z,A=parseFloat(z.value);return{type:"number",value:A,numberToken:F,evaluate:function(){return A}}}),g.addLeafExpression("idRef",function(B,H,y){var z=y.matchTokenType("ID_REF");if(!z)return;if(!z.value)return;if(z.template){var F=z.value.substring(2),A=o.tokenize(F),T=B.requireElement("expression",A);return{type:"idRefTemplate",args:[T],op:function(V,I){return H.getRootNode(V.me).getElementById(I)},evaluate:function(V){return H.unifiedEval(this,V)}}}else{const V=z.value.substring(1);return{type:"idRef",css:z.value,value:V,evaluate:function(I){return H.getRootNode(I.me).getElementById(V)}}}}),g.addLeafExpression("classRef",function(B,H,y){var z=y.matchTokenType("CLASS_REF");if(!z)return;if(!z.value)return;if(z.template){var F=z.value.substring(2),A=o.tokenize(F),T=B.requireElement("expression",A);return{type:"classRefTemplate",args:[T],op:function(V,I){return new Fv("."+I,V.me,!0)},evaluate:function(V){return H.unifiedEval(this,V)}}}else{const V=z.value;return{type:"classRef",css:V,evaluate:function(I){return new Fv(V,I.me,!0)}}}});class D extends Fv{constructor(B,H,y){super(B,H);this.templateParts=y,this.elements=y.filter((z)=>z instanceof Element)}get css(){let B="",H=0;for(let y of this.templateParts)if(y instanceof Element)B+="[data-hs-query-id='"+H+++"']";else B+=y;return B}[Symbol.iterator](){this.elements.forEach((H,y)=>H.dataset.hsQueryId=y);const B=super[Symbol.iterator]();return this.elements.forEach((H)=>H.removeAttribute("data-hs-query-id")),B}}g.addLeafExpression("queryRef",function(B,H,y){var z=y.matchOpToken("<");if(!z)return;var F=y.consumeUntil("/");y.requireOpToken("/"),y.requireOpToken(">");var A=F.map(function(p){if(p.type==="STRING")return'"'+p.value+'"';else return p.value}).join(""),T,V,I;if(A.indexOf("$")>=0)T=!0,V=o.tokenize(A,!0),I=B.parseStringTemplate(V);return{type:"queryRef",css:A,args:I,op:function(p,...b){if(T)return new D(A,p.me,b);else return new Fv(A,p.me)},evaluate:function(p){return H.unifiedEval(this,p)}}}),g.addLeafExpression("attributeRef",function(B,H,y){var z=y.matchTokenType("ATTRIBUTE_REF");if(!z)return;if(!z.value)return;var F=z.value;if(F.indexOf("[")===0)var A=F.substring(2,F.length-1);else var A=F.substring(1);var T="["+A+"]",V=A.split("="),I=V[0],p=V[1];if(p){if(p.indexOf('"')===0)p=p.substring(1,p.length-1)}return{type:"attributeRef",name:I,css:T,value:p,op:function(b){var W=b.you||b.me;if(W)return W.getAttribute(I)},evaluate:function(b){return H.unifiedEval(this,b)}}}),g.addLeafExpression("styleRef",function(B,H,y){var z=y.matchTokenType("STYLE_REF");if(!z)return;if(!z.value)return;var F=z.value.substr(1);if(F.startsWith("computed-"))return F=F.substr(9),{type:"computedStyleRef",name:F,op:function(A){var T=A.you||A.me;if(T)return H.resolveComputedStyle(T,F)},evaluate:function(A){return H.unifiedEval(this,A)}};else return{type:"styleRef",name:F,op:function(A){var T=A.you||A.me;if(T)return H.resolveStyle(T,F)},evaluate:function(A){return H.unifiedEval(this,A)}}}),g.addGrammarElement("objectKey",function(B,H,y){var z;if(z=y.matchTokenType("STRING"))return{type:"objectKey",key:z.value,evaluate:function(){return z.value}};else if(y.matchOpToken("[")){var F=B.parseElement("expression",y);return y.requireOpToken("]"),{type:"objectKey",expr:F,args:[F],op:function(T,V){return V},evaluate:function(T){return H.unifiedEval(this,T)}}}else{var A="";do if(z=y.matchTokenType("IDENTIFIER")||y.matchOpToken("-"),z)A+=z.value;while(z);return{type:"objectKey",key:A,evaluate:function(){return A}}}}),g.addLeafExpression("objectLiteral",function(B,H,y){if(!y.matchOpToken("{"))return;var z=[],F=[];if(!y.matchOpToken("}")){do{var A=B.requireElement("objectKey",y);y.requireOpToken(":");var T=B.requireElement("expression",y);F.push(T),z.push(A)}while(y.matchOpToken(","));y.requireOpToken("}")}return{type:"objectLiteral",args:[z,F],op:function(V,I,p){var b={};for(var W=0;W<I.length;W++)b[I[W]]=p[W];return b},evaluate:function(V){return H.unifiedEval(this,V)}}}),g.addGrammarElement("nakedNamedArgumentList",function(B,H,y){var z=[],F=[];if(y.currentToken().type==="IDENTIFIER")do{var A=y.requireTokenType("IDENTIFIER");y.requireOpToken(":");var T=B.requireElement("expression",y);F.push(T),z.push({name:A,value:T})}while(y.matchOpToken(","));return{type:"namedArgumentList",fields:z,args:[F],op:function(V,I){var p={_namedArgList_:!0};for(var b=0;b<I.length;b++){var W=z[b];p[W.name.value]=I[b]}return p},evaluate:function(V){return H.unifiedEval(this,V)}}}),g.addGrammarElement("namedArgumentList",function(B,H,y){if(!y.matchOpToken("("))return;var z=B.requireElement("nakedNamedArgumentList",y);return y.requireOpToken(")"),z}),g.addGrammarElement("symbol",function(B,H,y){var z="default";if(y.matchToken("global"))z="global";else if(y.matchToken("element")||y.matchToken("module")){if(z="element",y.matchOpToken("'"))y.requireToken("s")}else if(y.matchToken("local"))z="local";let F=y.matchOpToken(":"),A=y.matchTokenType("IDENTIFIER");if(A&&A.value){var T=A.value;if(F)T=":"+T;if(z==="default"){if(T.indexOf("$")===0)z="global";if(T.indexOf(":")===0)z="element"}return{type:"symbol",token:A,scope:z,name:T,evaluate:function(V){return H.resolveSymbol(T,V,z)}}}}),g.addGrammarElement("implicitMeTarget",function(B,H,y){return{type:"implicitMeTarget",evaluate:function(z){return z.you||z.me}}}),g.addLeafExpression("boolean",function(B,H,y){var z=y.matchToken("true")||y.matchToken("false");if(!z)return;const F=z.value==="true";return{type:"boolean",evaluate:function(A){return F}}}),g.addLeafExpression("null",function(B,H,y){if(y.matchToken("null"))return{type:"null",evaluate:function(z){return null}}}),g.addLeafExpression("arrayLiteral",function(B,H,y){if(!y.matchOpToken("["))return;var z=[];if(!y.matchOpToken("]")){do{var F=B.requireElement("expression",y);z.push(F)}while(y.matchOpToken(","));y.requireOpToken("]")}return{type:"arrayLiteral",values:z,args:[z],op:function(A,T){return T},evaluate:function(A){return H.unifiedEval(this,A)}}}),g.addLeafExpression("blockLiteral",function(B,H,y){if(!y.matchOpToken("\\"))return;var z=[],F=y.matchTokenType("IDENTIFIER");if(F){z.push(F);while(y.matchOpToken(","))z.push(y.requireTokenType("IDENTIFIER"))}y.requireOpToken("-"),y.requireOpToken(">");var A=B.requireElement("expression",y);return{type:"blockLiteral",args:z,expr:A,evaluate:function(T){var V=function(){for(var I=0;I<z.length;I++)T.locals[z[I].value]=arguments[I];return A.evaluate(T)};return V}}}),g.addIndirectExpression("propertyAccess",function(B,H,y,z){if(!y.matchOpToken("."))return;var F=y.requireTokenType("IDENTIFIER"),A={type:"propertyAccess",root:z,prop:F,args:[z],op:function(T,V){var I=H.resolveProperty(V,F.value);return I},evaluate:function(T){return H.unifiedEval(this,T)}};return B.parseElement("indirectExpression",y,A)}),g.addIndirectExpression("of",function(B,H,y,z){if(!y.matchToken("of"))return;var F=B.requireElement("unaryExpression",y),A=null,T=z;while(T.root)A=T,T=T.root;if(T.type!=="symbol"&&T.type!=="attributeRef"&&T.type!=="styleRef"&&T.type!=="computedStyleRef")B.raiseParseError(y,"Cannot take a property of a non-symbol: "+T.type);var V=T.type==="attributeRef",I=T.type==="styleRef"||T.type==="computedStyleRef";if(V||I)var p=T;var b=T.name,W={type:"ofExpression",prop:T.token,root:F,attribute:p,expression:z,args:[F],op:function(C,J){if(V)return H.resolveAttribute(J,b);else if(I)if(T.type==="computedStyleRef")return H.resolveComputedStyle(J,b);else return H.resolveStyle(J,b);else return H.resolveProperty(J,b)},evaluate:function(C){return H.unifiedEval(this,C)}};if(T.type==="attributeRef")W.attribute=T;if(A)A.root=W,A.args=[W];else z=W;return B.parseElement("indirectExpression",y,z)}),g.addIndirectExpression("possessive",function(B,H,y,z){if(B.possessivesDisabled)return;var F=y.matchOpToken("'");if(F||z.type==="symbol"&&(z.name==="my"||z.name==="its"||z.name==="your")&&(y.currentToken().type==="IDENTIFIER"||y.currentToken().type==="ATTRIBUTE_REF"||y.currentToken().type==="STYLE_REF")){if(F)y.requireToken("s");var A,T,V;if(A=B.parseElement("attributeRef",y),A==null){if(T=B.parseElement("styleRef",y),T==null)V=y.requireTokenType("IDENTIFIER")}var I={type:"possessive",root:z,attribute:A||T,prop:V,args:[z],op:function(p,b){if(A)var W=H.resolveAttribute(b,A.name);else if(T){var W;if(T.type==="computedStyleRef")W=H.resolveComputedStyle(b,T.name);else W=H.resolveStyle(b,T.name)}else var W=H.resolveProperty(b,V.value);return W},evaluate:function(p){return H.unifiedEval(this,p)}};return B.parseElement("indirectExpression",y,I)}}),g.addIndirectExpression("inExpression",function(B,H,y,z){if(!y.matchToken("in"))return;var F=B.requireElement("unaryExpression",y),A={type:"inExpression",root:z,args:[z,F],op:function(T,V,I){var p=[];if(V.css)H.implicitLoop(I,function(W){var C=W.querySelectorAll(V.css);for(var J=0;J<C.length;J++)p.push(C[J])});else if(V instanceof Element){var b=!1;if(H.implicitLoop(I,function(W){if(W.contains(V))b=!0}),b)return V}else H.implicitLoop(V,function(W){H.implicitLoop(I,function(C){if(W===C)p.push(W)})});return p},evaluate:function(T){return H.unifiedEval(this,T)}};return B.parseElement("indirectExpression",y,A)}),g.addIndirectExpression("asExpression",function(B,H,y,z){if(!y.matchToken("as"))return;y.matchToken("a")||y.matchToken("an");var F=B.requireElement("dotOrColonPath",y).evaluate(),A={type:"asExpression",root:z,args:[z],op:function(T,V){return H.convertValue(V,F)},evaluate:function(T){return H.unifiedEval(this,T)}};return B.parseElement("indirectExpression",y,A)}),g.addIndirectExpression("functionCall",function(B,H,y,z){if(!y.matchOpToken("("))return;var F=[];if(!y.matchOpToken(")")){do F.push(B.requireElement("expression",y));while(y.matchOpToken(","));y.requireOpToken(")")}if(z.root)var A={type:"functionCall",root:z,argExressions:F,args:[z.root,F],op:function(T,V,I){H.nullCheck(V,z.root);var p=V[z.prop.value];if(H.nullCheck(p,z),p.hyperfunc)I.push(T);return p.apply(V,I)},evaluate:function(T){return H.unifiedEval(this,T)}};else var A={type:"functionCall",root:z,argExressions:F,args:[z,F],op:function(V,I,p){if(H.nullCheck(I,z),I.hyperfunc)p.push(V);var b=I.apply(null,p);return b},evaluate:function(V){return H.unifiedEval(this,V)}};return B.parseElement("indirectExpression",y,A)}),g.addIndirectExpression("attributeRefAccess",function(B,H,y,z){var F=B.parseElement("attributeRef",y);if(!F)return;var A={type:"attributeRefAccess",root:z,attribute:F,args:[z],op:function(T,V){var I=H.resolveAttribute(V,F.name);return I},evaluate:function(T){return H.unifiedEval(this,T)}};return A}),g.addIndirectExpression("arrayIndex",function(B,H,y,z){if(!y.matchOpToken("["))return;var F=!1,A=!1,T=null,V=null;if(y.matchOpToken(".."))F=!0,T=B.requireElement("expression",y);else if(T=B.requireElement("expression",y),y.matchOpToken("..")){A=!0;var I=y.currentToken();if(I.type!=="R_BRACKET")V=B.parseElement("expression",y)}y.requireOpToken("]");var p={type:"arrayIndex",root:z,prop:T,firstIndex:T,secondIndex:V,args:[z,T,V],op:function(b,W,C,J){if(W==null)return null;if(F){if(C<0)C=W.length+C;return W.slice(0,C+1)}else if(A)if(J!=null){if(J<0)J=W.length+J;return W.slice(C,J+1)}else return W.slice(C);else return W[C]},evaluate:function(b){return H.unifiedEval(this,b)}};return B.parseElement("indirectExpression",y,p)});var $=["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","pc","pt","px"];g.addGrammarElement("postfixExpression",function(B,H,y){var z=B.parseElement("primaryExpression",y);let F=y.matchAnyToken.apply(y,$)||y.matchOpToken("%");if(F)return{type:"stringPostfix",postfix:F.value,args:[z],op:function(I,p){return""+p+F.value},evaluate:function(I){return H.unifiedEval(this,I)}};var A=null;if(y.matchToken("s")||y.matchToken("seconds"))A=1000;else if(y.matchToken("ms")||y.matchToken("milliseconds"))A=1;if(A)return{type:"timeExpression",time:z,factor:A,args:[z],op:function(I,p){return p*A},evaluate:function(I){return H.unifiedEval(this,I)}};if(y.matchOpToken(":")){var T=y.requireTokenType("IDENTIFIER");if(!T.value)return;var V=!y.matchOpToken("!");return{type:"typeCheck",typeName:T,nullOk:V,args:[z],op:function(I,p){var b=H.typeCheck(p,this.typeName.value,V);if(b)return p;else throw new Error("Typecheck failed!  Expected: "+T.value)},evaluate:function(I){return H.unifiedEval(this,I)}}}else return z}),g.addGrammarElement("logicalNot",function(B,H,y){if(!y.matchToken("not"))return;var z=B.requireElement("unaryExpression",y);return{type:"logicalNot",root:z,args:[z],op:function(F,A){return!A},evaluate:function(F){return H.unifiedEval(this,F)}}}),g.addGrammarElement("noExpression",function(B,H,y){if(!y.matchToken("no"))return;var z=B.requireElement("unaryExpression",y);return{type:"noExpression",root:z,args:[z],op:function(F,A){return H.isEmpty(A)},evaluate:function(F){return H.unifiedEval(this,F)}}}),g.addLeafExpression("some",function(B,H,y){if(!y.matchToken("some"))return;var z=B.requireElement("expression",y);return{type:"noExpression",root:z,args:[z],op:function(F,A){return!H.isEmpty(A)},evaluate(F){return H.unifiedEval(this,F)}}}),g.addGrammarElement("negativeNumber",function(B,H,y){if(!y.matchOpToken("-"))return;var z=B.requireElement("unaryExpression",y);return{type:"negativeNumber",root:z,args:[z],op:function(F,A){return-1*A},evaluate:function(F){return H.unifiedEval(this,F)}}}),g.addGrammarElement("unaryExpression",function(B,H,y){return y.matchToken("the"),B.parseAnyOf(["beepExpression","logicalNot","relativePositionalExpression","positionalExpression","noExpression","negativeNumber","postfixExpression"],y)}),g.addGrammarElement("beepExpression",function(B,H,y){if(!y.matchToken("beep!"))return;var z=B.parseElement("unaryExpression",y);if(z){z.booped=!0;var F=z.evaluate;return z.evaluate=function(A){let T=F.apply(z,arguments),V=A.me;return H.beepValueToConsole(V,z,T),T},z}});var j=function(B,H,y,z){var F=H.querySelectorAll(y);for(var A=0;A<F.length;A++){var T=F[A];if(T.compareDocumentPosition(B)===Node.DOCUMENT_POSITION_PRECEDING)return T}if(z)return F[0]},N=function(B,H,y,z){var F=H.querySelectorAll(y);for(var A=F.length-1;A>=0;A--){var T=F[A];if(T.compareDocumentPosition(B)===Node.DOCUMENT_POSITION_FOLLOWING)return T}if(z)return F[F.length-1]},Y=function(B,H,y,z){var F=[];Ov.prototype.forEach(H,function(I){if(I.matches(y)||I===B)F.push(I)});for(var A=0;A<F.length-1;A++){var T=F[A];if(T===B)return F[A+1]}if(z){var V=F[0];if(V&&V.matches(y))return V}},M=function(B,H,y,z){return Y(B,Array.from(H).reverse(),y,z)};g.addGrammarElement("relativePositionalExpression",function(B,H,y){var z=y.matchAnyToken("next","previous");if(!z)return;var F=z.value==="next",A=B.parseElement("expression",y);if(y.matchToken("from")){y.pushFollow("in");try{var T=B.requireElement("unaryExpression",y)}finally{y.popFollow()}}else var T=B.requireElement("implicitMeTarget",y);var V=!1,I;if(y.matchToken("in")){V=!0;var p=B.requireElement("unaryExpression",y)}else if(y.matchToken("within"))I=B.requireElement("unaryExpression",y);else I=document.body;var b=!1;if(y.matchToken("with"))y.requireToken("wrapping"),b=!0;return{type:"relativePositionalExpression",from:T,forwardSearch:F,inSearch:V,wrapping:b,inElt:p,withinElt:I,operator:z.value,args:[A,T,p,I],op:function(W,C,J,S,t){var c=C.css;if(c==null)throw"Expected a CSS value to be returned by "+Tv.sourceFor.apply(A);if(V){if(S)if(F)return Y(J,S,c,b);else return M(J,S,c,b)}else if(t)if(F)return j(J,t,c,b);else return N(J,t,c,b)},evaluate:function(W){return H.unifiedEval(this,W)}}}),g.addGrammarElement("positionalExpression",function(B,H,y){var z=y.matchAnyToken("first","last","random");if(!z)return;y.matchAnyToken("in","from","of");var F=B.requireElement("unaryExpression",y);const A=z.value;return{type:"positionalExpression",rhs:F,operator:z.value,args:[F],op:function(T,V){if(V&&!Array.isArray(V))if(V.children)V=V.children;else V=Array.from(V);if(V){if(A==="first")return V[0];else if(A==="last")return V[V.length-1];else if(A==="random")return V[Math.floor(Math.random()*V.length)]}},evaluate:function(T){return H.unifiedEval(this,T)}}}),g.addGrammarElement("mathOperator",function(B,H,y){var z=B.parseElement("unaryExpression",y),F,A=null;F=y.matchAnyOpToken("+","-","*","/")||y.matchToken("mod");while(F){A=A||F;var T=F.value;if(A.value!==T)B.raiseParseError(y,"You must parenthesize math operations with different operators");var V=B.parseElement("unaryExpression",y);z={type:"mathOperator",lhs:z,rhs:V,operator:T,args:[z,V],op:function(I,p,b){if(T==="+")return p+b;else if(T==="-")return p-b;else if(T==="*")return p*b;else if(T==="/")return p/b;else if(T==="mod")return p%b},evaluate:function(I){return H.unifiedEval(this,I)}},F=y.matchAnyOpToken("+","-","*","/")||y.matchToken("mod")}return z}),g.addGrammarElement("mathExpression",function(B,H,y){return B.parseAnyOf(["mathOperator","unaryExpression"],y)});function O(B,H,y){if(H.contains)return H.contains(y);else if(H.includes)return H.includes(y);else throw Error("The value of "+B.sourceFor()+" does not have a contains or includes method on it")}function X(B,H,y){if(H.match)return!!H.match(y);else if(H.matches)return H.matches(y);else throw Error("The value of "+B.sourceFor()+" does not have a match or matches method on it")}g.addGrammarElement("comparisonOperator",function(B,H,y){var z=B.parseElement("mathExpression",y),F=y.matchAnyOpToken("<",">","<=",">=","==","===","!=","!=="),A=F?F.value:null,T=!0,V=!1;if(A==null){if(y.matchToken("is")||y.matchToken("am"))if(y.matchToken("not"))if(y.matchToken("in"))A="not in";else if(y.matchToken("a"))A="not a",V=!0;else if(y.matchToken("empty"))A="not empty",T=!1;else{if(y.matchToken("really"))A="!==";else A="!=";if(y.matchToken("equal"))y.matchToken("to")}else if(y.matchToken("in"))A="in";else if(y.matchToken("a"))A="a",V=!0;else if(y.matchToken("empty"))A="empty",T=!1;else if(y.matchToken("less"))if(y.requireToken("than"),y.matchToken("or"))y.requireToken("equal"),y.requireToken("to"),A="<=";else A="<";else if(y.matchToken("greater"))if(y.requireToken("than"),y.matchToken("or"))y.requireToken("equal"),y.requireToken("to"),A=">=";else A=">";else{if(y.matchToken("really"))A="===";else A="==";if(y.matchToken("equal"))y.matchToken("to")}else if(y.matchToken("equals"))A="==";else if(y.matchToken("really"))y.requireToken("equals"),A="===";else if(y.matchToken("exist")||y.matchToken("exists"))A="exist",T=!1;else if(y.matchToken("matches")||y.matchToken("match"))A="match";else if(y.matchToken("contains")||y.matchToken("contain"))A="contain";else if(y.matchToken("includes")||y.matchToken("include"))A="include";else if(y.matchToken("do")||y.matchToken("does"))if(y.requireToken("not"),y.matchToken("matches")||y.matchToken("match"))A="not match";else if(y.matchToken("contains")||y.matchToken("contain"))A="not contain";else if(y.matchToken("exist")||y.matchToken("exist"))A="not exist",T=!1;else if(y.matchToken("include"))A="not include";else B.raiseParseError(y,"Expected matches or contains")}if(A){var I,p,b;if(V)I=y.requireTokenType("IDENTIFIER"),p=!y.matchOpToken("!");else if(T){if(b=B.requireElement("mathExpression",y),A==="match"||A==="not match")b=b.css?b.css:b}var W=z;z={type:"comparisonOperator",operator:A,typeName:I,nullOk:p,lhs:z,rhs:b,args:[z,b],op:function(C,J,S){if(A==="==")return J==S;else if(A==="!=")return J!=S;if(A==="===")return J===S;else if(A==="!==")return J!==S;if(A==="match")return J!=null&&X(W,J,S);if(A==="not match")return J==null||!X(W,J,S);if(A==="in")return S!=null&&O(b,S,J);if(A==="not in")return S==null||!O(b,S,J);if(A==="contain")return J!=null&&O(W,J,S);if(A==="not contain")return J==null||!O(W,J,S);if(A==="include")return J!=null&&O(W,J,S);if(A==="not include")return J==null||!O(W,J,S);if(A==="===")return J===S;else if(A==="!==")return J!==S;else if(A==="<")return J<S;else if(A===">")return J>S;else if(A==="<=")return J<=S;else if(A===">=")return J>=S;else if(A==="empty")return H.isEmpty(J);else if(A==="not empty")return!H.isEmpty(J);else if(A==="exist")return H.doesExist(J);else if(A==="not exist")return!H.doesExist(J);else if(A==="a")return H.typeCheck(J,I.value,p);else if(A==="not a")return!H.typeCheck(J,I.value,p);else throw"Unknown comparison : "+A},evaluate:function(C){return H.unifiedEval(this,C)}}}return z}),g.addGrammarElement("comparisonExpression",function(B,H,y){return B.parseAnyOf(["comparisonOperator","mathExpression"],y)}),g.addGrammarElement("logicalOperator",function(B,H,y){var z=B.parseElement("comparisonExpression",y),F,A=null;F=y.matchToken("and")||y.matchToken("or");while(F){if(A=A||F,A.value!==F.value)B.raiseParseError(y,"You must parenthesize logical operations with different operators");var T=B.requireElement("comparisonExpression",y);const V=F.value;z={type:"logicalOperator",operator:V,lhs:z,rhs:T,args:[z,T],op:function(I,p,b){if(V==="and")return p&&b;else return p||b},evaluate:function(I){return H.unifiedEval(this,I)}},F=y.matchToken("and")||y.matchToken("or")}return z}),g.addGrammarElement("logicalExpression",function(B,H,y){return B.parseAnyOf(["logicalOperator","mathExpression"],y)}),g.addGrammarElement("asyncExpression",function(B,H,y){if(y.matchToken("async")){var z=B.requireElement("logicalExpression",y),F={type:"asyncExpression",value:z,evaluate:function(A){return{asyncWrapper:!0,value:this.value.evaluate(A)}}};return F}else return B.parseElement("logicalExpression",y)}),g.addGrammarElement("expression",function(B,H,y){return y.matchToken("the"),B.parseElement("asyncExpression",y)}),g.addGrammarElement("assignableExpression",function(B,H,y){y.matchToken("the");var z=B.parseElement("primaryExpression",y);if(z&&(z.type==="symbol"||z.type==="ofExpression"||z.type==="propertyAccess"||z.type==="attributeRefAccess"||z.type==="attributeRef"||z.type==="styleRef"||z.type==="arrayIndex"||z.type==="possessive"))return z;else B.raiseParseError(y,"A target expression must be writable.  The expression type '"+(z&&z.type)+"' is not.");return z}),g.addGrammarElement("hyperscript",function(B,H,y){var z=[];if(y.hasMore())while(B.featureStart(y.currentToken())||y.currentToken().value==="("){var F=B.requireElement("feature",y);z.push(F),y.matchToken("end")}return{type:"hyperscript",features:z,apply:function(A,T,V){for(let I of z)I.install(A,T,V)}}});var L=function(B){var H=[];if(B.token(0).value==="("&&(B.token(1).value===")"||B.token(2).value===","||B.token(2).value===")")){B.matchOpToken("(");do H.push(B.requireTokenType("IDENTIFIER"));while(B.matchOpToken(","));B.requireOpToken(")")}return H};g.addFeature("on",function(B,H,y){if(!y.matchToken("on"))return;var z=!1;if(y.matchToken("every"))z=!0;var F=[],A=null;do{var T=B.requireElement("eventName",y,"Expected event name"),V=T.evaluate();if(A)A=A+" or "+V;else A="on "+V;var I=L(y),p=null;if(y.matchOpToken("["))p=B.requireElement("expression",y),y.requireOpToken("]");var b,W,C;if(y.currentToken().type==="NUMBER"){var J=y.consumeToken();if(!J.value)return;if(b=parseInt(J.value),y.matchToken("to")){var S=y.consumeToken();if(!S.value)return;W=parseInt(S.value)}else if(y.matchToken("and"))C=!0,y.requireToken("on")}var t,c;if(V==="intersection"){if(t={},y.matchToken("with"))t.with=B.requireElement("expression",y).evaluate();if(y.matchToken("having"))do if(y.matchToken("margin"))t.rootMargin=B.requireElement("stringLike",y).evaluate();else if(y.matchToken("threshold"))t.threshold=B.requireElement("expression",y).evaluate();else B.raiseParseError(y,"Unknown intersection config specification");while(y.matchToken("and"))}else if(V==="mutation")if(c={},y.matchToken("of"))do if(y.matchToken("anything"))c.attributes=!0,c.subtree=!0,c.characterData=!0,c.childList=!0;else if(y.matchToken("childList"))c.childList=!0;else if(y.matchToken("attributes"))c.attributes=!0,c.attributeOldValue=!0;else if(y.matchToken("subtree"))c.subtree=!0;else if(y.matchToken("characterData"))c.characterData=!0,c.characterDataOldValue=!0;else if(y.currentToken().type==="ATTRIBUTE_REF"){var _v=y.consumeToken();if(c.attributeFilter==null)c.attributeFilter=[];if(_v.value.indexOf("@")==0)c.attributeFilter.push(_v.value.substring(1));else B.raiseParseError(y,"Only shorthand attribute references are allowed here")}else B.raiseParseError(y,"Unknown mutation config specification");while(y.matchToken("or"));else c.attributes=!0,c.characterData=!0,c.childList=!0;var yv=null,pv=!1;if(y.matchToken("from"))if(y.matchToken("elsewhere"))pv=!0;else{y.pushFollow("or");try{yv=B.requireElement("expression",y)}finally{y.popFollow()}if(!yv)B.raiseParseError(y,'Expected either target value or "elsewhere".')}if(yv===null&&pv===!1&&y.matchToken("elsewhere"))pv=!0;if(y.matchToken("in"))var xv=B.parseElement("unaryExpression",y);if(y.matchToken("debounced")){y.requireToken("at");var gv=B.requireElement("unaryExpression",y),Vv=gv.evaluate({})}else if(y.matchToken("throttled")){y.requireToken("at");var gv=B.requireElement("unaryExpression",y),dv=gv.evaluate({})}F.push({execCount:0,every:z,on:V,args:I,filter:p,from:yv,inExpr:xv,elsewhere:pv,startCount:b,endCount:W,unbounded:C,debounceTime:Vv,throttleTime:dv,mutationSpec:c,intersectionSpec:t,debounced:void 0,lastExec:void 0})}while(y.matchToken("or"));var $v=!0;if(!z){if(y.matchToken("queue"))if(y.matchToken("all"))var Mv=!0,$v=!1;else if(y.matchToken("first"))var Nv=!0;else if(y.matchToken("none"))var g0=!0;else y.requireToken("last")}var U0=B.requireElement("commandList",y);B.ensureTerminated(U0);var b0,A0;if(y.matchToken("catch"))b0=y.requireTokenType("IDENTIFIER").value,A0=B.requireElement("commandList",y),B.ensureTerminated(A0);if(y.matchToken("finally")){var x0=B.requireElement("commandList",y);B.ensureTerminated(x0)}var hv={displayName:A,events:F,start:U0,every:z,execCount:0,errorHandler:A0,errorSymbol:b0,execute:function(Uv){let fv=H.getEventQueueFor(Uv.me,hv);if(fv.executing&&z===!1){if(g0||Nv&&fv.queue.length>0)return;if($v)fv.queue.length=0;fv.queue.push(Uv);return}hv.execCount++,fv.executing=!0,Uv.meta.onHalt=function(){fv.executing=!1;var Iv=fv.queue.shift();if(Iv)setTimeout(function(){hv.execute(Iv)},1)},Uv.meta.reject=function(Iv){console.error(Iv.message?Iv.message:Iv);var r=H.getHyperTrace(Uv,Iv);if(r)r.print();H.triggerEvent(Uv.me,"exception",{error:Iv})},U0.execute(Uv)},install:function(Uv,fv){for(let r of hv.events){var Iv;if(r.elsewhere)Iv=[document];else if(r.from)Iv=r.from.evaluate(H.makeContext(Uv,hv,Uv,null));else Iv=[Uv];H.implicitLoop(Iv,function(wv){var Sv=r.on;if(wv==null){console.warn("'%s' feature ignored because target does not exists:",A,Uv);return}if(r.mutationSpec)Sv="hyperscript:mutation",new MutationObserver(function(lv,zv){if(!hv.executing)H.triggerEvent(wv,Sv,{mutationList:lv,observer:zv})}).observe(wv,r.mutationSpec);if(r.intersectionSpec){Sv="hyperscript:intersection";const Jv=new IntersectionObserver(function(lv){for(let D0 of lv){var zv={observer:Jv};zv=Object.assign(zv,D0),zv.intersecting=D0.isIntersecting,H.triggerEvent(wv,Sv,zv)}},r.intersectionSpec);Jv.observe(wv)}var Ay=wv.addEventListener||wv.on;Ay.call(wv,Sv,function Jv(lv){if(typeof Node!=="undefined"&&Uv instanceof Node&&wv!==Uv&&!Uv.isConnected){wv.removeEventListener(Sv,Jv);return}var zv=H.makeContext(Uv,hv,Uv,lv);if(r.elsewhere&&Uv.contains(lv.target))return;if(r.from)zv.result=wv;for(let H0 of r.args){let p0=zv.event[H0.value];if(p0!==void 0)zv.locals[H0.value]=p0;else if("detail"in zv.event)zv.locals[H0.value]=zv.event.detail[H0.value]}if(zv.meta.errorHandler=A0,zv.meta.errorSymbol=b0,zv.meta.finallyHandler=x0,r.filter){var D0=zv.meta.context;zv.meta.context=zv.event;try{var R0=r.filter.evaluate(zv);if(R0);else return}finally{zv.meta.context=D0}}if(r.inExpr){var av=lv.target;while(!0)if(av.matches&&av.matches(r.inExpr.css)){zv.result=av;break}else if(av=av.parentElement,av==null)return}if(r.execCount++,r.startCount){if(r.endCount){if(r.execCount<r.startCount||r.execCount>r.endCount)return}else if(r.unbounded){if(r.execCount<r.startCount)return}else if(r.execCount!==r.startCount)return}if(r.debounceTime){if(r.debounced)clearTimeout(r.debounced);r.debounced=setTimeout(function(){hv.execute(zv)},r.debounceTime);return}if(r.throttleTime)if(r.lastExec&&Date.now()<r.lastExec+r.throttleTime)return;else r.lastExec=Date.now();hv.execute(zv)})})}}};return B.setParent(U0,hv),hv}),g.addFeature("def",function(B,H,y){if(!y.matchToken("def"))return;var z=B.requireElement("dotOrColonPath",y),F=z.evaluate(),A=F.split("."),T=A.pop(),V=[];if(y.matchOpToken("("))if(y.matchOpToken(")"));else{do V.push(y.requireTokenType("IDENTIFIER"));while(y.matchOpToken(","));y.requireOpToken(")")}var I=B.requireElement("commandList",y),p,b;if(y.matchToken("catch"))p=y.requireTokenType("IDENTIFIER").value,b=B.parseElement("commandList",y);if(y.matchToken("finally")){var W=B.requireElement("commandList",y);B.ensureTerminated(W)}var C={displayName:T+"("+V.map(function(J){return J.value}).join(", ")+")",name:T,args:V,start:I,errorHandler:b,errorSymbol:p,finallyHandler:W,install:function(J,S){var t=function(){var c=H.makeContext(S,C,J,null);c.meta.errorHandler=b,c.meta.errorSymbol=p,c.meta.finallyHandler=W;for(var _v=0;_v<V.length;_v++){var yv=V[_v],pv=arguments[_v];if(yv)c.locals[yv.value]=pv}if(c.meta.caller=arguments[V.length],c.meta.caller)c.meta.callingCommand=c.meta.caller.meta.command;var xv,gv=null,Vv=new Promise(function(dv,$v){xv=dv,gv=$v});if(I.execute(c),c.meta.returned)return c.meta.returnValue;else return c.meta.resolve=xv,c.meta.reject=gv,Vv};t.hyperfunc=!0,t.hypername=F,H.assignToNamespace(J,A,T,t)}};if(B.ensureTerminated(I),b)B.ensureTerminated(b);return B.setParent(I,C),C}),g.addFeature("set",function(B,H,y){let z=B.parseElement("setCommand",y);if(z){if(z.target.scope!=="element")B.raiseParseError(y,"variables declared at the feature level must be element scoped.");let F={start:z,install:function(A,T){z&&z.execute(H.makeContext(A,F,A,null))}};return B.ensureTerminated(z),F}}),g.addFeature("init",function(B,H,y){if(!y.matchToken("init"))return;var z=y.matchToken("immediately"),F=B.requireElement("commandList",y),A={start:F,install:function(T,V){let I=function(){F&&F.execute(H.makeContext(T,A,T,null))};if(z)I();else setTimeout(I,0)}};return B.ensureTerminated(F),B.setParent(F,A),A}),g.addFeature("worker",function(B,H,y){if(y.matchToken("worker")){B.raiseParseError(y,"In order to use the 'worker' feature, include the _hyperscript worker plugin. See https://hyperscript.org/features/worker/ for more info.");return}}),g.addFeature("behavior",function(B,H,y){if(!y.matchToken("behavior"))return;var z=B.requireElement("dotOrColonPath",y).evaluate(),F=z.split("."),A=F.pop(),T=[];if(y.matchOpToken("(")&&!y.matchOpToken(")")){do T.push(y.requireTokenType("IDENTIFIER").value);while(y.matchOpToken(","));y.requireOpToken(")")}var V=B.requireElement("hyperscript",y);for(var I=0;I<V.features.length;I++){var p=V.features[I];p.behavior=z}return{install:function(b,W){H.assignToNamespace(k.document&&k.document.body,F,A,function(C,J,S){var t=H.getInternalData(C),c=Q0(t,z+"Scope");for(var _v=0;_v<T.length;_v++)c[T[_v]]=S[T[_v]];V.apply(C,J)})}}}),g.addFeature("install",function(B,H,y){if(!y.matchToken("install"))return;var z=B.requireElement("dotOrColonPath",y).evaluate(),F=z.split("."),A=B.parseElement("namedArgumentList",y),T;return T={install:function(V,I){H.unifiedEval({args:[A],op:function(p,b){var W=k;for(var C=0;C<F.length;C++)if(W=W[F[C]],typeof W!=="object"&&typeof W!=="function")throw new Error("No such behavior defined as "+z);if(!(W instanceof Function))throw new Error(z+" is not a behavior");W(V,I,b)}},H.makeContext(V,T,V,null))}}}),g.addGrammarElement("jsBody",function(B,H,y){var z=y.currentToken().start,F=y.currentToken(),A=[],T="",V=!1;while(y.hasMore()){F=y.consumeToken();var I=y.token(0,!0);if(I.type==="IDENTIFIER"&&I.value==="end")break;if(V)if(F.type==="IDENTIFIER"||F.type==="NUMBER")T+=F.value;else{if(T!=="")A.push(T);T="",V=!1}else if(F.type==="IDENTIFIER"&&F.value==="function")V=!0}var p=F.end+1;return{type:"jsBody",exposedFunctionNames:A,jsSource:y.source.substring(z,p)}}),g.addFeature("js",function(B,H,y){if(!y.matchToken("js"))return;var z=B.requireElement("jsBody",y),F=z.jsSource+"\nreturn { "+z.exposedFunctionNames.map(function(T){return T+":"+T}).join(",")+" } ",A=new Function(F);return{jsSource:F,function:A,exposedFunctionNames:z.exposedFunctionNames,install:function(){Object.assign(k,A())}}}),g.addCommand("js",function(B,H,y){if(!y.matchToken("js"))return;var z=[];if(y.matchOpToken("("))if(y.matchOpToken(")"));else{do{var F=y.requireTokenType("IDENTIFIER");z.push(F.value)}while(y.matchOpToken(","));y.requireOpToken(")")}var A=B.requireElement("jsBody",y);y.matchToken("end");var T=ev(Function,z.concat([A.jsSource])),V={jsSource:A.jsSource,function:T,inputs:z,op:function(I){var p=[];z.forEach(function(W){p.push(H.resolveSymbol(W,I,"default"))});var b=T.apply(k,p);if(b&&typeof b.then==="function")return new Promise(function(W){b.then(function(C){I.result=C,W(H.findNext(this,I))})});else return I.result=b,H.findNext(this,I)}};return V}),g.addCommand("async",function(B,H,y){if(!y.matchToken("async"))return;if(y.matchToken("do")){var z=B.requireElement("commandList",y),F=z;while(F.next)F=F.next;F.next=H.HALT,y.requireToken("end")}else var z=B.requireElement("command",y);var A={body:z,op:function(T){return setTimeout(function(){z.execute(T)}),H.findNext(this,T)}};return B.setParent(z,A),A}),g.addCommand("tell",function(B,H,y){var z=y.currentToken();if(!y.matchToken("tell"))return;var F=B.requireElement("expression",y),A=B.requireElement("commandList",y);if(y.hasMore()&&!B.featureStart(y.currentToken()))y.requireToken("end");var T="tell_"+z.start,V={value:F,body:A,args:[F],resolveNext:function(I){var p=I.meta.iterators[T];if(p.index<p.value.length)return I.you=p.value[p.index++],A;else if(I.you=p.originalYou,this.next)return this.next;else return H.findNext(this.parent,I)},op:function(I,p){if(p==null)p=[];else if(!(Array.isArray(p)||p instanceof NodeList))p=[p];return I.meta.iterators[T]={originalYou:I.you,index:0,value:p},this.resolveNext(I)}};return B.setParent(A,V),V}),g.addCommand("wait",function(B,H,y){if(!y.matchToken("wait"))return;var z;if(y.matchToken("for")){y.matchToken("a");var F=[];do{var A=y.token(0);if(A.type==="NUMBER"||A.type==="L_PAREN")F.push({time:B.requireElement("expression",y).evaluate()});else F.push({name:B.requireElement("dotOrColonPath",y,"Expected event name").evaluate(),args:L(y)})}while(y.matchToken("or"));if(y.matchToken("from"))var T=B.requireElement("expression",y);return z={event:F,on:T,args:[T],op:function(I,p){var b=p?p:I.me;if(!(b instanceof EventTarget))throw new Error("Not a valid event target: "+this.on.sourceFor());return new Promise((W)=>{var C=!1;for(let S of F){var J=(t)=>{if(I.result=t,S.args)for(let c of S.args)I.locals[c.value]=t[c.value]||(t.detail?t.detail[c.value]:null);if(!C)C=!0,W(H.findNext(this,I))};if(S.name)b.addEventListener(S.name,J,{once:!0});else if(S.time!=null)setTimeout(J,S.time,S.time)}})}},z}else{var V;if(y.matchToken("a"))y.requireToken("tick"),V=0;else V=B.requireElement("expression",y);return z={type:"waitCmd",time:V,args:[V],op:function(I,p){return new Promise((b)=>{setTimeout(()=>{b(H.findNext(this,I))},p)})},execute:function(I){return H.unifiedExec(this,I)}},z}}),g.addGrammarElement("dotOrColonPath",function(B,H,y){var z=y.matchTokenType("IDENTIFIER");if(z){var F=[z.value],A=y.matchOpToken(".")||y.matchOpToken(":");if(A)do F.push(y.requireTokenType("IDENTIFIER","NUMBER").value);while(y.matchOpToken(A.value));return{type:"dotOrColonPath",path:F,evaluate:function(){return F.join(A?A.value:"")}}}}),g.addGrammarElement("eventName",function(B,H,y){var z;if(z=y.matchTokenType("STRING"))return{evaluate:function(){return z.value}};return B.parseElement("dotOrColonPath",y)});function q(B,H,y,z){var F=H.requireElement("eventName",z),A=H.parseElement("namedArgumentList",z);if(B==="send"&&z.matchToken("to")||B==="trigger"&&z.matchToken("on"))var T=H.requireElement("expression",z);else var T=H.requireElement("implicitMeTarget",z);var V={eventName:F,details:A,to:T,args:[T,F,A],op:function(I,p,b,W){return y.nullCheck(p,T),y.implicitLoop(p,function(C){y.triggerEvent(C,b,W,I.me)}),y.findNext(V,I)}};return V}g.addCommand("trigger",function(B,H,y){if(y.matchToken("trigger"))return q("trigger",B,H,y)}),g.addCommand("send",function(B,H,y){if(y.matchToken("send"))return q("send",B,H,y)});var Q=function(B,H,y,z){if(z)if(B.commandBoundary(y.currentToken()))B.raiseParseError(y,"'return' commands must return a value.  If you do not wish to return a value, use 'exit' instead.");else var F=B.requireElement("expression",y);var A={value:F,args:[F],op:function(T,V){var I=T.meta.resolve;if(T.meta.returned=!0,T.meta.returnValue=V,I)if(V)I(V);else I();return H.HALT}};return A};g.addCommand("return",function(B,H,y){if(y.matchToken("return"))return Q(B,H,y,!0)}),g.addCommand("exit",function(B,H,y){if(y.matchToken("exit"))return Q(B,H,y,!1)}),g.addCommand("halt",function(B,H,y){if(y.matchToken("halt")){if(y.matchToken("the")){if(y.requireToken("event"),y.matchOpToken("'"))y.requireToken("s");var z=!0}if(y.matchToken("bubbling"))var F=!0;else if(y.matchToken("default"))var A=!0;var T=Q(B,H,y,!1),V={keepExecuting:!0,bubbling:F,haltDefault:A,exit:T,op:function(I){if(I.event){if(F)I.event.stopPropagation();else if(A)I.event.preventDefault();else I.event.stopPropagation(),I.event.preventDefault();if(z)return H.findNext(this,I);else return T}}};return V}}),g.addCommand("log",function(B,H,y){if(!y.matchToken("log"))return;var z=[B.parseElement("expression",y)];while(y.matchOpToken(","))z.push(B.requireElement("expression",y));if(y.matchToken("with"))var F=B.requireElement("expression",y);var A={exprs:z,withExpr:F,args:[F,z],op:function(T,V,I){if(V)V.apply(null,I);else console.log.apply(null,I);return H.findNext(this,T)}};return A}),g.addCommand("beep!",function(B,H,y){if(!y.matchToken("beep!"))return;var z=[B.parseElement("expression",y)];while(y.matchOpToken(","))z.push(B.requireElement("expression",y));var F={exprs:z,args:[z],op:function(A,T){for(let V=0;V<z.length;V++){const I=z[V],p=T[V];H.beepValueToConsole(A.me,I,p)}return H.findNext(this,A)}};return F}),g.addCommand("throw",function(B,H,y){if(!y.matchToken("throw"))return;var z=B.requireElement("expression",y),F={expr:z,args:[z],op:function(A,T){throw H.registerHyperTrace(A,T),T}};return F});var E=function(B,H,y){var z=B.requireElement("expression",y),F={expr:z,args:[z],op:function(A,T){return A.result=T,H.findNext(F,A)}};return F};g.addCommand("call",function(B,H,y){if(!y.matchToken("call"))return;var z=E(B,H,y);if(z.expr&&z.expr.type!=="functionCall")B.raiseParseError(y,"Must be a function invocation");return z}),g.addCommand("get",function(B,H,y){if(y.matchToken("get"))return E(B,H,y)}),g.addCommand("make",function(B,H,y){if(!y.matchToken("make"))return;y.matchToken("a")||y.matchToken("an");var z=B.requireElement("expression",y),F=[];if(z.type!=="queryRef"&&y.matchToken("from"))do F.push(B.requireElement("expression",y));while(y.matchOpToken(","));if(y.matchToken("called"))var A=B.requireElement("symbol",y);var T;if(z.type==="queryRef")return T={op:function(V){var I,p="div",b,W=[],C=/(?:(^|#|\.)([^#\. ]+))/g;while(I=C.exec(z.css))if(I[1]==="")p=I[2].trim();else if(I[1]==="#")b=I[2].trim();else W.push(I[2].trim());var J=document.createElement(p);if(b!==void 0)J.id=b;for(var S=0;S<W.length;S++){var t=W[S];J.classList.add(t)}if(V.result=J,A)H.setSymbol(A.name,V,A.scope,J);return H.findNext(this,V)}},T;else return T={args:[z,F],op:function(V,I,p){if(V.result=ev(I,p),A)H.setSymbol(A.name,V,A.scope,V.result);return H.findNext(this,V)}},T}),g.addGrammarElement("pseudoCommand",function(B,H,y){let z=y.token(1);if(!(z&&z.op&&(z.value==="."||z.value==="(")))return null;var F=B.requireElement("primaryExpression",y),A=F.root,T=F;while(A.root!=null)T=T.root,A=A.root;if(F.type!=="functionCall")B.raiseParseError(y,"Pseudo-commands must be function calls");if(T.type==="functionCall"&&T.root.root==null){if(y.matchAnyToken("the","to","on","with","into","from","at"))var V=B.requireElement("expression",y);else if(y.matchToken("me"))var V=B.requireElement("implicitMeTarget",y)}var I;if(V)I={type:"pseudoCommand",root:V,argExressions:T.argExressions,args:[V,T.argExressions],op:function(p,b,W){H.nullCheck(b,V);var C=b[T.root.name];if(H.nullCheck(C,T),C.hyperfunc)W.push(p);return p.result=C.apply(b,W),H.findNext(I,p)},execute:function(p){return H.unifiedExec(this,p)}};else I={type:"pseudoCommand",expr:F,args:[F],op:function(p,b){return p.result=b,H.findNext(I,p)},execute:function(p){return H.unifiedExec(this,p)}};return I});var x=function(B,H,y,z,F){var A=z.type==="symbol",T=z.type==="attributeRef",V=z.type==="styleRef",I=z.type==="arrayIndex";if(!(T||V||A)&&z.root==null)B.raiseParseError(y,"Can only put directly into symbols, not references");var p=null,b=null;if(A);else if(T||V){p=B.requireElement("implicitMeTarget",y);var W=z}else if(I)b=z.firstIndex,p=z.root;else{b=z.prop?z.prop.value:null;var W=z.attribute;p=z.root}var C={target:z,symbolWrite:A,value:F,args:[p,b,F],op:function(J,S,t,c){if(A)H.setSymbol(z.name,J,z.scope,c);else if(H.nullCheck(S,p),I)S[t]=c;else H.implicitLoop(S,function(_v){if(W)if(W.type==="attributeRef")if(c==null)_v.removeAttribute(W.name);else _v.setAttribute(W.name,c);else _v.style[W.name]=c;else _v[t]=c});return H.findNext(this,J)}};return C};g.addCommand("default",function(B,H,y){if(!y.matchToken("default"))return;var z=B.requireElement("assignableExpression",y);y.requireToken("to");var F=B.requireElement("expression",y),A=x(B,H,y,z,F),T={target:z,value:F,setter:A,args:[z],op:function(V,I){if(I)return H.findNext(this,V);else return A}};return A.parent=T,T}),g.addCommand("set",function(B,H,y){if(!y.matchToken("set"))return;if(y.currentToken().type==="L_BRACE"){var z=B.requireElement("objectLiteral",y);y.requireToken("on");var F=B.requireElement("expression",y),A={objectLiteral:z,target:F,args:[z,F],op:function(V,I,p){return Object.assign(p,I),H.findNext(this,V)}};return A}try{y.pushFollow("to");var F=B.requireElement("assignableExpression",y)}finally{y.popFollow()}y.requireToken("to");var T=B.requireElement("expression",y);return x(B,H,y,F,T)}),g.addCommand("if",function(B,H,y){if(!y.matchToken("if"))return;var z=B.requireElement("expression",y);y.matchToken("then");var F=B.parseElement("commandList",y),A=!1;let T=y.matchToken("else")||y.matchToken("otherwise");if(T){let p=y.peekToken("if");if(A=p!=null&&p.line===T.line,A)var V=B.parseElement("command",y);else var V=B.parseElement("commandList",y)}if(y.hasMore()&&!A)y.requireToken("end");var I={expr:z,trueBranch:F,falseBranch:V,args:[z],op:function(p,b){if(b)return F;else if(V)return V;else return H.findNext(this,p)}};return B.setParent(F,I),B.setParent(V,I),I});var h=function(B,H,y,z){var F=H.currentToken(),A;if(H.matchToken("for")||z){var T=H.requireTokenType("IDENTIFIER");A=T.value,H.requireToken("in");var V=B.requireElement("expression",H)}else if(H.matchToken("in")){A="it";var V=B.requireElement("expression",H)}else if(H.matchToken("while"))var I=B.requireElement("expression",H);else if(H.matchToken("until")){var p=!0;if(H.matchToken("event")){var b=B.requireElement("dotOrColonPath",H,"Expected event name");if(H.matchToken("from"))var W=B.requireElement("expression",H)}else var I=B.requireElement("expression",H)}else if(!B.commandBoundary(H.currentToken())&&H.currentToken().value!=="forever"){var C=B.requireElement("expression",H);H.requireToken("times")}else{H.matchToken("forever");var J=!0}if(H.matchToken("index"))var T=H.requireTokenType("IDENTIFIER"),S=T.value;var t=B.parseElement("commandList",H);if(t&&b){var c=t;while(c.next)c=c.next;var _v={type:"waitATick",op:function(){return new Promise(function(gv){setTimeout(function(){gv(y.findNext(_v))},0)})}};c.next=_v}if(H.hasMore())H.requireToken("end");if(A==null){A="_implicit_repeat_"+F.start;var yv=A}else var yv=A+"_"+F.start;var pv={identifier:A,indexIdentifier:S,slot:yv,expression:V,forever:J,times:C,until:p,event:b,on:W,whileExpr:I,resolveNext:function(){return this},loop:t,args:[I,C],op:function(gv,Vv,dv){var $v=gv.meta.iterators[yv],Mv=!1,Nv=null;if(this.forever)Mv=!0;else if(this.until)if(b)Mv=gv.meta.iterators[yv].eventFired===!1;else Mv=Vv!==!0;else if(I)Mv=Vv;else if(dv)Mv=$v.index<dv;else{var g0=$v.iterator.next();Mv=!g0.done,Nv=g0.value}if(Mv){if($v.value)gv.result=gv.locals[A]=Nv;else gv.result=$v.index;if(S)gv.locals[S]=$v.index;return $v.index++,t}else return gv.meta.iterators[yv]=null,y.findNext(this.parent,gv)}};B.setParent(t,pv);var xv={name:"repeatInit",args:[V,b,W],op:function(gv,Vv,dv,$v){var Mv={index:0,value:Vv,eventFired:!1};if(gv.meta.iterators[yv]=Mv,Vv&&Vv[Symbol.iterator])Mv.iterator=Vv[Symbol.iterator]();if(b){var Nv=$v||gv.me;Nv.addEventListener(dv,function(g0){gv.meta.iterators[yv].eventFired=!0},{once:!0})}return pv},execute:function(gv){return y.unifiedExec(this,gv)}};return B.setParent(pv,xv),xv};g.addCommand("repeat",function(B,H,y){if(y.matchToken("repeat"))return h(B,y,H,!1)}),g.addCommand("for",function(B,H,y){if(y.matchToken("for"))return h(B,y,H,!0)}),g.addCommand("continue",function(B,H,y){if(!y.matchToken("continue"))return;var z={op:function(F){for(var A=this.parent;;A=A.parent){if(A==void 0)B.raiseParseError(y,"Command `continue` cannot be used outside of a `repeat` loop.");if(A.loop!=null)return A.resolveNext(F)}}};return z}),g.addCommand("break",function(B,H,y){if(!y.matchToken("break"))return;var z={op:function(F){for(var A=this.parent;;A=A.parent){if(A==void 0)B.raiseParseError(y,"Command `continue` cannot be used outside of a `repeat` loop.");if(A.loop!=null)return H.findNext(A.parent,F)}}};return z}),g.addGrammarElement("stringLike",function(B,H,y){return B.parseAnyOf(["string","nakedString"],y)}),g.addCommand("append",function(B,H,y){if(!y.matchToken("append"))return;var z=null,F=B.requireElement("expression",y),A={type:"symbol",evaluate:function(I){return H.resolveSymbol("result",I)}};if(y.matchToken("to"))z=B.requireElement("expression",y);else z=A;var T=null;if(z.type==="symbol"||z.type==="attributeRef"||z.root!=null)T=x(B,H,y,z,A);var V={value:F,target:z,args:[z,F],op:function(I,p,b){if(Array.isArray(p))return p.push(b),H.findNext(this,I);else if(p instanceof Element)return p.innerHTML+=b,H.findNext(this,I);else if(T)return I.result=(p||"")+b,T;else throw Error("Unable to append a value!")},execute:function(I){return H.unifiedExec(this,I)}};if(T!=null)T.parent=V;return V});function K(B,H,y){y.matchToken("at")||y.matchToken("from");const z={includeStart:!0,includeEnd:!1};if(z.from=y.matchToken("start")?0:B.requireElement("expression",y),y.matchToken("to")||y.matchOpToken(".."))if(y.matchToken("end"))z.toEnd=!0;else z.to=B.requireElement("expression",y);if(y.matchToken("inclusive"))z.includeEnd=!0;else if(y.matchToken("exclusive"))z.includeStart=!1;return z}class G{constructor(B,H){this.re=B,this.str=H}next(){const B=this.re.exec(this.str);if(B===null)return{done:!0};else return{value:B}}}class f{constructor(B,H,y){this.re=B,this.flags=H,this.str=y}[Symbol.iterator](){return new G(new RegExp(this.re,this.flags),this.str)}}g.addCommand("pick",(B,H,y)=>{if(!y.matchToken("pick"))return;if(y.matchToken("the"),y.matchToken("item")||y.matchToken("items")||y.matchToken("character")||y.matchToken("characters")){const z=K(B,H,y);return y.requireToken("from"),{args:[B.requireElement("expression",y),z.from,z.to],op(A,T,V,I){if(z.toEnd)I=T.length;if(!z.includeStart)V++;if(z.includeEnd)I++;if(I==null||I==void 0)I=V+1;return A.result=T.slice(V,I),H.findNext(this,A)}}}if(y.matchToken("match")){y.matchToken("of");const z=B.parseElement("expression",y);let F="";if(y.matchOpToken("|"))F=y.requireToken("identifier").value;return y.requireToken("from"),{args:[B.parseElement("expression",y),z],op(T,V,I){return T.result=new RegExp(I,F).exec(V),H.findNext(this,T)}}}if(y.matchToken("matches")){y.matchToken("of");const z=B.parseElement("expression",y);let F="gu";if(y.matchOpToken("|"))F="g"+y.requireToken("identifier").value.replace("g","");return console.log("flags",F),y.requireToken("from"),{args:[B.parseElement("expression",y),z],op(T,V,I){return T.result=new f(I,F,V),H.findNext(this,T)}}}}),g.addCommand("increment",function(B,H,y){if(!y.matchToken("increment"))return;var z,F=B.parseElement("assignableExpression",y);if(y.matchToken("by"))z=B.requireElement("expression",y);var A={type:"implicitIncrementOp",target:F,args:[F,z],op:function(T,V,I){V=V?parseFloat(V):0,I=z?parseFloat(I):1;var p=V+I;return T.result=p,p},evaluate:function(T){return H.unifiedEval(this,T)}};return x(B,H,y,F,A)}),g.addCommand("decrement",function(B,H,y){if(!y.matchToken("decrement"))return;var z,F=B.parseElement("assignableExpression",y);if(y.matchToken("by"))z=B.requireElement("expression",y);var A={type:"implicitDecrementOp",target:F,args:[F,z],op:function(T,V,I){V=V?parseFloat(V):0,I=z?parseFloat(I):1;var p=V-I;return T.result=p,p},evaluate:function(T){return H.unifiedEval(this,T)}};return x(B,H,y,F,A)});function u(B,H){var y="text",z;if(B.matchToken("a")||B.matchToken("an"),B.matchToken("json")||B.matchToken("Object"))y="json";else if(B.matchToken("response"))y="response";else if(B.matchToken("html"))y="html";else if(B.matchToken("text"));else z=H.requireElement("dotOrColonPath",B).evaluate();return{type:y,conversion:z}}g.addCommand("fetch",function(B,H,y){if(!y.matchToken("fetch"))return;var z=B.requireElement("stringLike",y);if(y.matchToken("as"))var F=u(y,B);if(y.matchToken("with")&&y.currentToken().value!=="{")var A=B.parseElement("nakedNamedArgumentList",y);else var A=B.parseElement("objectLiteral",y);if(F==null&&y.matchToken("as"))F=u(y,B);var T=F?F.type:"text",V=F?F.conversion:null,I={url:z,argExpressions:A,args:[z,A],op:function(p,b,W){var C=W||{};C.sender=p.me,C.headers=C.headers||{};var J=new AbortController;let S=p.me.addEventListener("fetch:abort",function(){J.abort()},{once:!0});C.signal=J.signal,H.triggerEvent(p.me,"hyperscript:beforeFetch",C),H.triggerEvent(p.me,"fetch:beforeRequest",C),W=C;var t=!1;if(W.timeout)setTimeout(function(){if(!t)J.abort()},W.timeout);return fetch(b,W).then(function(c){let _v={response:c};if(H.triggerEvent(p.me,"fetch:afterResponse",_v),c=_v.response,T==="response")return p.result=c,H.triggerEvent(p.me,"fetch:afterRequest",{result:c}),t=!0,H.findNext(I,p);if(T==="json")return c.json().then(function(yv){return p.result=yv,H.triggerEvent(p.me,"fetch:afterRequest",{result:yv}),t=!0,H.findNext(I,p)});return c.text().then(function(yv){if(V)yv=H.convertValue(yv,V);if(T==="html")yv=H.convertValue(yv,"Fragment");return p.result=yv,H.triggerEvent(p.me,"fetch:afterRequest",{result:yv}),t=!0,H.findNext(I,p)})}).catch(function(c){throw H.triggerEvent(p.me,"fetch:error",{reason:c}),c}).finally(function(){p.me.removeEventListener("fetch:abort",S)})}};return I})}function F0(g){g.addCommand("settle",function(M,O,X){if(X.matchToken("settle")){if(!M.commandBoundary(X.currentToken()))var L=M.requireElement("expression",X);else var L=M.requireElement("implicitMeTarget",X);var q={type:"settleCmd",args:[L],op:function(Q,E){O.nullCheck(E,L);var x=null,h=!1,K=!1,G=new Promise(function(f){x=f});return E.addEventListener("transitionstart",function(){K=!0},{once:!0}),setTimeout(function(){if(!K&&!h)x(O.findNext(q,Q))},500),E.addEventListener("transitionend",function(){if(!h)x(O.findNext(q,Q))},{once:!0}),G},execute:function(Q){return O.unifiedExec(this,Q)}};return q}}),g.addCommand("add",function(M,O,X){if(X.matchToken("add")){var L=M.parseElement("classRef",X),q=null,Q=null;if(L==null){if(q=M.parseElement("attributeRef",X),q==null){if(Q=M.parseElement("styleLiteral",X),Q==null)M.raiseParseError(X,"Expected either a class reference or attribute expression")}}else{var E=[L];while(L=M.parseElement("classRef",X))E.push(L)}if(X.matchToken("to"))var x=M.requireElement("expression",X);else var x=M.requireElement("implicitMeTarget",X);if(X.matchToken("when")){if(Q)M.raiseParseError(X,"Only class and properties are supported with a when clause");var h=M.requireElement("expression",X)}if(E)return{classRefs:E,to:x,args:[x,E],op:function(K,G,f){return O.nullCheck(G,x),O.forEach(f,function(u){O.implicitLoop(G,function(B){if(h){if(K.result=B,O.evaluateNoPromise(h,K)){if(B instanceof Element)B.classList.add(u.className)}else if(B instanceof Element)B.classList.remove(u.className);K.result=null}else if(B instanceof Element)B.classList.add(u.className)})}),O.findNext(this,K)}};else if(q)return{type:"addCmd",attributeRef:q,to:x,args:[x],op:function(K,G,f){return O.nullCheck(G,x),O.implicitLoop(G,function(u){if(h){if(K.result=u,O.evaluateNoPromise(h,K))u.setAttribute(q.name,q.value);else u.removeAttribute(q.name);K.result=null}else u.setAttribute(q.name,q.value)}),O.findNext(this,K)},execute:function(K){return O.unifiedExec(this,K)}};else return{type:"addCmd",cssDeclaration:Q,to:x,args:[x,Q],op:function(K,G,f){return O.nullCheck(G,x),O.implicitLoop(G,function(u){u.style.cssText+=f}),O.findNext(this,K)},execute:function(K){return O.unifiedExec(this,K)}}}}),g.addGrammarElement("styleLiteral",function(M,O,X){if(!X.matchOpToken("{"))return;var L=[""],q=[];while(X.hasMore()){if(X.matchOpToken("\\"))X.consumeToken();else if(X.matchOpToken("}"))break;else if(X.matchToken("$")){var Q=X.matchOpToken("{"),E=M.parseElement("expression",X);if(Q)X.requireOpToken("}");q.push(E),L.push("")}else{var x=X.consumeToken();L[L.length-1]+=X.source.substring(x.start,x.end)}L[L.length-1]+=X.lastWhitespace()}return{type:"styleLiteral",args:[q],op:function(h,K){var G="";return L.forEach(function(f,u){if(G+=f,(u in K))G+=K[u]}),G},evaluate:function(h){return O.unifiedEval(this,h)}}}),g.addCommand("remove",function(M,O,X){if(X.matchToken("remove")){var L=M.parseElement("classRef",X),q=null,Q=null;if(L==null){if(q=M.parseElement("attributeRef",X),q==null){if(Q=M.parseElement("expression",X),Q==null)M.raiseParseError(X,"Expected either a class reference, attribute expression or value expression")}}else{var E=[L];while(L=M.parseElement("classRef",X))E.push(L)}if(X.matchToken("from"))var x=M.requireElement("expression",X);else if(Q==null)var x=M.requireElement("implicitMeTarget",X);if(Q)return{elementExpr:Q,from:x,args:[Q,x],op:function(h,K,G){return O.nullCheck(K,Q),O.implicitLoop(K,function(f){if(f.parentElement&&(G==null||G.contains(f)))f.parentElement.removeChild(f)}),O.findNext(this,h)}};else return{classRefs:E,attributeRef:q,elementExpr:Q,from:x,args:[E,x],op:function(h,K,G){if(O.nullCheck(G,x),K)O.forEach(K,function(f){O.implicitLoop(G,function(u){u.classList.remove(f.className)})});else O.implicitLoop(G,function(f){f.removeAttribute(q.name)});return O.findNext(this,h)}}}}),g.addCommand("toggle",function(M,O,X){if(X.matchToken("toggle")){if(X.matchAnyToken("the","my"),X.currentToken().type==="STYLE_REF"){var L=X.consumeToken().value.substr(1),q=!0,Q=j(M,X,L);if(X.matchToken("of")){X.pushFollow("with");try{var E=M.requireElement("expression",X)}finally{X.popFollow()}}else var E=M.requireElement("implicitMeTarget",X)}else if(X.matchToken("between")){var x=!0,h=M.parseElement("classRef",X);X.requireToken("and");var K=M.requireElement("classRef",X)}else{var h=M.parseElement("classRef",X),G=null;if(h==null){if(G=M.parseElement("attributeRef",X),G==null)M.raiseParseError(X,"Expected either a class reference or attribute expression")}else{var f=[h];while(h=M.parseElement("classRef",X))f.push(h)}}if(q!==!0)if(X.matchToken("on"))var E=M.requireElement("expression",X);else var E=M.requireElement("implicitMeTarget",X);if(X.matchToken("for"))var u=M.requireElement("expression",X);else if(X.matchToken("until")){var B=M.requireElement("dotOrColonPath",X,"Expected event name");if(X.matchToken("from"))var H=M.requireElement("expression",X)}var y={classRef:h,classRef2:K,classRefs:f,attributeRef:G,on:E,time:u,evt:B,from:H,toggle:function(z,F,A,T){if(O.nullCheck(z,E),q)O.implicitLoop(z,function(V){Q("toggle",V)});else if(x)O.implicitLoop(z,function(V){if(V.classList.contains(F.className))V.classList.remove(F.className),V.classList.add(A.className);else V.classList.add(F.className),V.classList.remove(A.className)});else if(T)O.forEach(T,function(V){O.implicitLoop(z,function(I){I.classList.toggle(V.className)})});else O.forEach(z,function(V){if(V.hasAttribute(G.name))V.removeAttribute(G.name);else V.setAttribute(G.name,G.value)})},args:[E,u,B,H,h,K,f],op:function(z,F,A,T,V,I,p,b){if(A)return new Promise(function(W){y.toggle(F,I,p,b),setTimeout(function(){y.toggle(F,I,p,b),W(O.findNext(y,z))},A)});else if(T)return new Promise(function(W){var C=V||z.me;C.addEventListener(T,function(){y.toggle(F,I,p,b),W(O.findNext(y,z))},{once:!0}),y.toggle(F,I,p,b)});else return this.toggle(F,I,p,b),O.findNext(y,z)}};return y}});var D={display:function(M,O,X){if(X)O.style.display=X;else if(M==="toggle")if(getComputedStyle(O).display==="none")D.display("show",O,X);else D.display("hide",O,X);else if(M==="hide"){const L=g.runtime.getInternalData(O);if(L.originalDisplay==null)L.originalDisplay=O.style.display;O.style.display="none"}else{const L=g.runtime.getInternalData(O);if(L.originalDisplay&&L.originalDisplay!=="none")O.style.display=L.originalDisplay;else O.style.removeProperty("display")}},visibility:function(M,O,X){if(X)O.style.visibility=X;else if(M==="toggle")if(getComputedStyle(O).visibility==="hidden")D.visibility("show",O,X);else D.visibility("hide",O,X);else if(M==="hide")O.style.visibility="hidden";else O.style.visibility="visible"},opacity:function(M,O,X){if(X)O.style.opacity=X;else if(M==="toggle")if(getComputedStyle(O).opacity==="0")D.opacity("show",O,X);else D.opacity("hide",O,X);else if(M==="hide")O.style.opacity="0";else O.style.opacity="1"}},$=function(M,O,X){var L,q=X.currentToken();if(q.value==="when"||q.value==="with"||M.commandBoundary(q))L=M.parseElement("implicitMeTarget",X);else L=M.parseElement("expression",X);return L},j=function(M,O,X){var L=Hv.defaultHideShowStrategy,q=D;if(Hv.hideShowStrategies)q=Object.assign(q,Hv.hideShowStrategies);X=X||L||"display";var Q=q[X];if(Q==null)M.raiseParseError(O,"Unknown show/hide strategy : "+X);return Q};g.addCommand("hide",function(M,O,X){if(X.matchToken("hide")){var L=$(M,O,X),q=null;if(X.matchToken("with")){if(q=X.requireTokenType("IDENTIFIER","STYLE_REF").value,q.indexOf("*")===0)q=q.substr(1)}var Q=j(M,X,q);return{target:L,args:[L],op:function(E,x){return O.nullCheck(x,L),O.implicitLoop(x,function(h){Q("hide",h)}),O.findNext(this,E)}}}}),g.addCommand("show",function(M,O,X){if(X.matchToken("show")){var L=$(M,O,X),q=null;if(X.matchToken("with")){if(q=X.requireTokenType("IDENTIFIER","STYLE_REF").value,q.indexOf("*")===0)q=q.substr(1)}var Q=null;if(X.matchOpToken(":")){var E=X.consumeUntilWhitespace();X.matchTokenType("WHITESPACE"),Q=E.map(function(K){return K.value}).join("")}if(X.matchToken("when"))var x=M.requireElement("expression",X);var h=j(M,X,q);return{target:L,when:x,args:[L],op:function(K,G){return O.nullCheck(G,L),O.implicitLoop(G,function(f){if(x){if(K.result=f,O.evaluateNoPromise(x,K))h("show",f,Q);else h("hide",f);K.result=null}else h("show",f,Q)}),O.findNext(this,K)}}}}),g.addCommand("take",function(M,O,X){if(X.matchToken("take")){var L=M.parseElement("classRef",X),q=null,Q=null;if(L==null){if(q=M.parseElement("attributeRef",X),q==null)M.raiseParseError(X,"Expected either a class reference or attribute expression");if(X.matchToken("with"))Q=M.requireElement("expression",X)}if(X.matchToken("from"))var E=M.requireElement("expression",X);else var E=L;if(X.matchToken("for"))var x=M.requireElement("expression",X);else var x=M.requireElement("implicitMeTarget",X);if(L){var h={classRef:L,from:E,forElt:x,args:[L,E,x],op:function(K,G,f,u){O.nullCheck(f,E),O.nullCheck(u,x);var B=G.className;return O.implicitLoop(f,function(H){H.classList.remove(B)}),O.implicitLoop(u,function(H){H.classList.add(B)}),O.findNext(this,K)}};return h}else{var h={attributeRef:q,from:E,forElt:x,args:[E,x,Q],op:function(G,f,u,B){return O.nullCheck(f,E),O.nullCheck(u,x),O.implicitLoop(f,function(H){if(!B)H.removeAttribute(q.name);else H.setAttribute(q.name,B)}),O.implicitLoop(u,function(H){H.setAttribute(q.name,q.value||"")}),O.findNext(this,G)}};return h}}});function N(M,O,X,L){if(X!=null)var q=M.resolveSymbol(X,O);else var q=O;if(q instanceof Element||q instanceof HTMLDocument){while(q.firstChild)q.removeChild(q.firstChild);q.append(g.runtime.convertValue(L,"Fragment")),M.processNode(q)}else if(X!=null)M.setSymbol(X,O,null,L);else throw"Don't know how to put a value into "+typeof O}g.addCommand("put",function(M,O,X){if(X.matchToken("put")){var L=M.requireElement("expression",X),q=X.matchAnyToken("into","before","after");if(q==null&&X.matchToken("at"))X.matchToken("the"),q=X.matchAnyToken("start","end"),X.requireToken("of");if(q==null)M.raiseParseError(X,"Expected one of 'into', 'before', 'at start of', 'at end of', 'after'");var Q=M.requireElement("expression",X),E=q.value,x=!1,h=!1,K=null,G=null;if(Q.type==="arrayIndex"&&E==="into")x=!0,G=Q.prop,K=Q.root;else if(Q.prop&&Q.root&&E==="into")G=Q.prop.value,K=Q.root;else if(Q.type==="symbol"&&E==="into")h=!0,G=Q.name;else if(Q.type==="attributeRef"&&E==="into"){var f=!0;G=Q.name,K=M.requireElement("implicitMeTarget",X)}else if(Q.type==="styleRef"&&E==="into"){var u=!0;G=Q.name,K=M.requireElement("implicitMeTarget",X)}else if(Q.attribute&&E==="into"){var f=Q.attribute.type==="attributeRef",u=Q.attribute.type==="styleRef";G=Q.attribute.name,K=Q.root}else K=Q;var B={target:Q,operation:E,symbolWrite:h,value:L,args:[K,G,L],op:function(H,y,z,F){if(h)N(O,H,z,F);else if(O.nullCheck(y,K),E==="into")if(f)O.implicitLoop(y,function(T){T.setAttribute(z,F)});else if(u)O.implicitLoop(y,function(T){T.style[z]=F});else if(x)y[z]=F;else O.implicitLoop(y,function(T){N(O,T,z,F)});else{var A=E==="before"?Element.prototype.before:E==="after"?Element.prototype.after:E==="start"?Element.prototype.prepend:E==="end"?Element.prototype.append:Element.prototype.append;O.implicitLoop(y,function(T){if(A.call(T,F instanceof Node?F:O.convertValue(F,"Fragment")),T.parentElement)O.processNode(T.parentElement);else O.processNode(T)})}return O.findNext(this,H)}};return B}});function Y(M,O,X){var L;if(X.matchToken("the")||X.matchToken("element")||X.matchToken("elements")||X.currentToken().type==="CLASS_REF"||X.currentToken().type==="ID_REF"||X.currentToken().op&&X.currentToken().value==="<"){M.possessivesDisabled=!0;try{L=M.parseElement("expression",X)}finally{delete M.possessivesDisabled}if(X.matchOpToken("'"))X.requireToken("s")}else if(X.currentToken().type==="IDENTIFIER"&&X.currentToken().value==="its"){var q=X.matchToken("its");L={type:"pseudopossessiveIts",token:q,name:q.value,evaluate:function(Q){return O.resolveSymbol("it",Q)}}}else X.matchToken("my")||X.matchToken("me"),L=M.parseElement("implicitMeTarget",X);return L}g.addCommand("transition",function(M,O,X){if(X.matchToken("transition")){var L=Y(M,O,X),q=[],Q=[],E=[],x=X.currentToken();while(!M.commandBoundary(x)&&x.value!=="over"&&x.value!=="using"){if(X.currentToken().type==="STYLE_REF"){let u=X.consumeToken().value.substr(1);q.push({type:"styleRefValue",evaluate:function(){return u}})}else q.push(M.requireElement("stringLike",X));if(X.matchToken("from"))Q.push(M.requireElement("expression",X));else Q.push(null);if(X.requireToken("to"),X.matchToken("initial"))E.push({type:"initial_literal",evaluate:function(){return"initial"}});else E.push(M.requireElement("expression",X));x=X.currentToken()}if(X.matchToken("over"))var h=M.requireElement("expression",X);else if(X.matchToken("using"))var K=M.requireElement("expression",X);var G={to:E,args:[L,q,Q,E,K,h],op:function(f,u,B,H,y,z,F){O.nullCheck(u,L);var A=[];return O.implicitLoop(u,function(T){var V=new Promise(function(I,p){var b=T.style.transition;if(F)T.style.transition="all "+F+"ms ease-in";else if(z)T.style.transition=z;else T.style.transition=Hv.defaultTransition;var W=O.getInternalData(T),C=getComputedStyle(T),J={};for(var S=0;S<C.length;S++){var t=C[S],c=C[t];J[t]=c}if(!W.initalStyles)W.initalStyles=J;for(var S=0;S<B.length;S++){var _v=B[S],yv=H[S];if(yv==="computed"||yv==null)T.style[_v]=J[_v];else T.style[_v]=yv}var pv=!1,xv=!1;T.addEventListener("transitionend",function(){if(!xv)T.style.transition=b,xv=!0,I()},{once:!0}),T.addEventListener("transitionstart",function(){pv=!0},{once:!0}),setTimeout(function(){if(!xv&&!pv)T.style.transition=b,xv=!0,I()},100),setTimeout(function(){var gv=[];for(var Vv=0;Vv<B.length;Vv++){var dv=B[Vv],$v=y[Vv];if($v==="initial"){var Mv=W.initalStyles[dv];T.style[dv]=Mv}else T.style[dv]=$v}},0)});A.push(V)}),Promise.all(A).then(function(){return O.findNext(G,f)})}};return G}}),g.addCommand("measure",function(M,O,X){if(!X.matchToken("measure"))return;var L=Y(M,O,X),q=[];if(!M.commandBoundary(X.currentToken()))do q.push(X.matchTokenType("IDENTIFIER").value);while(X.matchOpToken(","));return{properties:q,args:[L],op:function(Q,E){if(O.nullCheck(E,L),(0 in E))E=E[0];var x=E.getBoundingClientRect(),h={top:E.scrollTop,left:E.scrollLeft,topMax:E.scrollTopMax,leftMax:E.scrollLeftMax,height:E.scrollHeight,width:E.scrollWidth};return Q.result={x:x.x,y:x.y,left:x.left,top:x.top,right:x.right,bottom:x.bottom,width:x.width,height:x.height,bounds:x,scrollLeft:h.left,scrollTop:h.top,scrollLeftMax:h.leftMax,scrollTopMax:h.topMax,scrollWidth:h.width,scrollHeight:h.height,scroll:h},O.forEach(q,function(K){if(K in Q.result)Q.locals[K]=Q.result[K];else throw"No such measurement as "+K}),O.findNext(this,Q)}}}),g.addLeafExpression("closestExpr",function(M,O,X){if(X.matchToken("closest")){if(X.matchToken("parent"))var L=!0;var q=null;if(X.currentToken().type==="ATTRIBUTE_REF"){var Q=M.requireElement("attributeRefAccess",X,null);q="["+Q.attribute.name+"]"}if(q==null){var E=M.requireElement("expression",X);if(E.css==null)M.raiseParseError(X,"Expected a CSS expression");else q=E.css}if(X.matchToken("to"))var x=M.parseElement("expression",X);else var x=M.parseElement("implicitMeTarget",X);var h={type:"closestExpr",parentSearch:L,expr:E,css:q,to:x,args:[x],op:function(K,G){if(G==null)return null;else{let f=[];if(O.implicitLoop(G,function(u){if(L)f.push(u.parentElement?u.parentElement.closest(q):null);else f.push(u.closest(q))}),O.shouldAutoIterate(G))return f;else return f[0]}},evaluate:function(K){return O.unifiedEval(this,K)}};if(Q)return Q.root=h,Q.args=[h],Q;else return h}}),g.addCommand("go",function(M,O,X){if(X.matchToken("go")){if(X.matchToken("back"))var L=!0;else if(X.matchToken("to"),X.matchToken("url")){var q=M.requireElement("stringLike",X),Q=!0;if(X.matchToken("in")){X.requireToken("new"),X.requireToken("window");var E=!0}}else{X.matchToken("the");var x=X.matchAnyToken("top","middle","bottom"),h=X.matchAnyToken("left","center","right");if(x||h)X.requireToken("of");var q=M.requireElement("unaryExpression",X),K=X.matchAnyOpToken("+","-");if(K){X.pushFollow("px");try{var G=M.requireElement("expression",X)}finally{X.popFollow()}}X.matchToken("px");var f=X.matchAnyToken("smoothly","instantly"),u={};if(x){if(x.value==="top")u.block="start";else if(x.value==="bottom")u.block="end";else if(x.value==="middle")u.block="center"}if(h){if(h.value==="left")u.inline="start";else if(h.value==="center")u.inline="center";else if(h.value==="right")u.inline="end"}if(f){if(f.value==="smoothly")u.behavior="smooth";else if(f.value==="instantly")u.behavior="instant"}}var B={target:q,args:[q,G],op:function(H,y,z){if(L)window.history.back();else if(Q){if(y)if(E)window.open(y);else window.location.href=y}else O.implicitLoop(y,function(F){if(F===window)F=document.body;if(K){var A=F.getBoundingClientRect();let V=document.createElement("div");if(K.value==="-")var T=-z;else var T=- -z;V.style.position="absolute",V.style.top=A.x+T+"px",V.style.left=A.y+T+"px",V.style.height=A.height+2*T+"px",V.style.width=A.width+2*T+"px",V.style.zIndex=""+Number.MIN_SAFE_INTEGER,V.style.opacity="0",document.body.appendChild(V),setTimeout(function(){document.body.removeChild(V)},100),F=V}F.scrollIntoView(u)});return O.findNext(B,H)}};return B}}),Hv.conversions.dynamicResolvers.push(function(M,O){if(!(M==="Values"||M.indexOf("Values:")===0))return;var X=M.split(":")[1],L={},q=g.runtime.implicitLoop.bind(g.runtime);if(q(O,function(x){var h=E(x);if(h!==void 0){L[h.name]=h.value;return}if(x.querySelectorAll!=null){var K=x.querySelectorAll("input,select,textarea");K.forEach(Q)}}),X)if(X==="JSON")return JSON.stringify(L);else if(X==="Form")return new URLSearchParams(L).toString();else throw"Unknown conversion: "+X;else return L;function Q(x){var h=E(x);if(h==void 0)return;if(L[h.name]==void 0){L[h.name]=h.value;return}if(Array.isArray(L[h.name])&&Array.isArray(h.value)){L[h.name]=[].concat(L[h.name],h.value);return}}function E(x){try{var h={name:x.name,value:x.value};if(h.name==void 0||h.value==void 0)return;if(x.type=="radio"&&x.checked==!1)return;if(x.type=="checkbox"){if(x.checked==!1)h.value=void 0;else if(typeof h.value==="string")h.value=[h.value]}if(x.type=="select-multiple"){var K=x.querySelectorAll("option[selected]");h.value=[];for(var G=0;G<K.length;G++)h.value.push(K[G].value)}return h}catch(f){return}}}),Hv.conversions.HTML=function(M){var O=function(X){if(X instanceof Array)return X.map(function(E){return O(E)}).join("");if(X instanceof HTMLElement)return X.outerHTML;if(X instanceof NodeList){var L="";for(var q=0;q<X.length;q++){var Q=X[q];if(Q instanceof HTMLElement)L+=Q.outerHTML}return L}if(X.toString)return X.toString();return""};return O(M)},Hv.conversions.Fragment=function(M){var O=document.createDocumentFragment();return g.runtime.implicitLoop(M,function(X){if(X instanceof Node)O.append(X);else{var L=document.createElement("template");L.innerHTML=X,O.append(L.content)}}),O}}const bv=new Ov,G0=bv.lexer,i=bv.parser;function I0(g,D){return bv.evaluate(g,D)}function e(){var g=Array.from(k.document.querySelectorAll("script[type='text/hyperscript'][src]"));Promise.all(g.map(function(N){return fetch(N.src).then(function(Y){return Y.text()})})).then((N)=>N.forEach((Y)=>O0(Y))).then(()=>D(function(){j(),bv.processNode(document.documentElement),k.document.addEventListener("htmx:load",function(N){bv.processNode(N.detail.elt)})}));function D(N){if(document.readyState!=="loading")setTimeout(N);else document.addEventListener("DOMContentLoaded",N)}function $(){var N=document.querySelector('meta[name="htmx-config"]');if(N)return ov(N.content);else return null}function j(){var N=$();if(N)Object.assign(Hv,N)}}const O0=Object.assign(I0,{config:Hv,use(g){g(O0)},internals:{lexer:G0,parser:i,runtime:bv,Lexer:o,Tokens:Tv,Parser:Rv,Runtime:Ov},ElementCollection:Fv,addFeature:i.addFeature.bind(i),addCommand:i.addCommand.bind(i),addLeafExpression:i.addLeafExpression.bind(i),addIndirectExpression:i.addIndirectExpression.bind(i),evaluate:bv.evaluate.bind(bv),parse:bv.parse.bind(bv),processNode:bv.processNode.bind(bv),browserInit:e});return O0})});var l2=Yy(Jy(),1),u2=Yy(Cy(),1);
